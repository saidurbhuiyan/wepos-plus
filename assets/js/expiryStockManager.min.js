jQuery(document).ready((function(e){const n=e("#expiry_date_fields"),i=e("#expiry_input"),t=e("#_expiry_rule"),p=e("#_stock"),r=e("#_manage_stock"),s=e("button.add-expiry-field");function d(e){return`\n            <tr class="form-field expiry-field-group">\n                <td>\n             <input type="date" class="short" name="expiry_dates[]" id="expiry_dates_${e}" value="">\n               </td>\n                <td>\n                <input type="number" class="short" min="1" step="1" name="expiry_quantities[]" id="expiry_quantities_${e}" value="1">\n                </td>\n                <td>\n                <input type="text" class="short" name="expiry_company[]"  id="expiry_company_${e}" value="">\n                </td>\n                <td><input type="number" class="short" name="expiry_buying_price[]" min="0" step="0.01" id="expiry_buying_price_${e}" value="0">\n                </td>\n                <td>\n                ${e>0?'<button type="button" class="remove-expiry-field">&times;</button>':'<span style="padding: 0 14px;"></span>'}\n                </td>\n            </tr>`}function o(){p.val(function(){const n=i.find('[id^="expiry_quantities_"]');return 0===n.length||"no"===t.val()?0:n.map((function(){return parseInt(e(this).val())||0})).get().reduce(((e,n)=>e+n),0)}())}i.add(e('[id^="expiry_quantities_"]')).on("input scroll",(function(){o()})),r.on("change",(function(){r.is(":checked")||t.val("no").trigger("change")})),t.on("change",(function(){const t=e(this).val();"yes"===t?(0===i.find(".expiry-field-group").length&&i.append(d(0)),n.show()):n.hide().find(".expiry-field-group").remove(),r.prop("checked","yes"===t),p.prop("disabled","yes"===t),e(".stock_fields").css("display","yes"===t?"":"none"),o()})),s.on("click",(function(){const e=i.find(".expiry-field-group").length;i.append(d(e)),o()})),n.on("click",".remove-expiry-field",(function(){e(this).closest(".expiry-field-group").remove(),o()}))}));