(()=>{var t={4577:t=>{"use strict";t.exports=function(t,e){void 0===e&&(e={});var a=e.offset;void 0===a&&(a=0);var s=e.threshold;void 0===s&&(s=0);var i=t.getBoundingClientRect(),r=i.top,o=i.right,n=i.bottom,c=i.left,l=i.width,u=i.height,d=n,p=window.innerWidth-c,_=window.innerHeight-r,m=o,v=s*l,h=s*u;return d>=(a.top||a+h)&&p>=(a.right||a+v)&&_>=(a.bottom||a+h)&&m>=(a.left||a+v)}},9623:t=>{t.exports=function(t,e){var a,s,i,r,o=0;return function(){a=this,s=arguments;var t=new Date-o;return r||(t>=e?n():r=setTimeout(n,e-t)),i};function n(){r=0,o=+new Date,i=t.apply(a,s),a=null,s=null}}},671:t=>{t.exports=function(t){var e={};function a(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=t,a.c=e,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(s,i,function(e){return t[e]}.bind(null,i));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s="fb15")}({f6fd:function(t,e){!function(t){var e="currentScript",a=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(s){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(s.stack)||[!1])[1];for(t in a)if(a[t].src==e||"interactive"==a[t].readyState)return a[t];return null}}})}(document)},fb15:function(t,e,a){"use strict";var s;(a.r(e),"undefined"!=typeof window)&&(a("f6fd"),(s=window.document.currentScript)&&(s=s.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(a.p=s[1]));function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var o=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(a,!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,meta:91,leftcommand:91,rightcommand:93,scrolllock:145,mycomputer:182,mycalculator:183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222,":":186,"+":187,"<":188,_:189,">":190,"?":191,"~":192,"{":219,"|":220,"}":221,'"':222},{a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90},{},{"numpad*":106,"numpad+":43,numpadadd:43,"numpad-":109,"numpad.":110,"numpad/":111,numlock:144,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105},{},{f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},{},{windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91});function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&"[object Arguments]"!==Object.prototype.toString.call(t))return;var a=[],s=!0,i=!1,r=void 0;try{for(var o,n=t[Symbol.iterator]();!(s=(o=n.next()).done)&&(a.push(o.value),!e||a.length!==e);s=!0);}catch(t){i=!0,r=t}finally{try{s||null==n.return||n.return()}finally{if(i)throw r}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var c=["INPUT","TEXTAREA","SELECT"],l=function(t,e,a){var s=t.find((function(t){var s,i,r=t.code,o=t.modifiers;return r===e&&(s=a,i=o,Object.entries(s).every((function(t){var e=n(t,2),a=e[0],s=e[1];return i[a]===s})))}));return!!s&&s.callback};function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(a,!0).forEach((function(e){p(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function p(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var _=function(){},m={ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},v={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},h=function(t,e){var a=d({},m);if(t.length>1)return t.reduce((function(t,a){return a=v[a]||a,m.hasOwnProperty("".concat(a,"Key"))?t.modifiers=d({},t.modifiers,p({},"".concat(a,"Key"),!0)):t.code=e[a]||f(a),t}),{modifiers:a});var s=v[t[0]]||t[0];return m.hasOwnProperty("".concat(s,"Key"))&&(a=d({},a,p({},"".concat(s,"Key"),!0))),{modifiers:a,code:e[s]||f(s)}},f=function(t){return o[t.toLowerCase()]||function(t){return 1===t.length?t.charCodeAt(0):void 0}(t)};function y(t,e,a){var s=e.value,i=e.modifiers;t._keyMap=function(t,e){var a=[];return Object.keys(t).forEach((function(s){var i=t[s],r=i.keyup,o={keydown:i.keydown||(r?_:t[s]),keyup:r||_},n=function(t){return(t=(t=(t=t.replace(/\s/g,"")).includes("numpad+")?t.replace("numpad+","numpadadd"):t).includes("++")?t.replace("++","+="):t).split(/\+{1}/)}(s),c=h(n,e),l=c.code,u=c.modifiers;a.push({code:l,modifiers:u,callback:o})})),a}(s,a),t._keyHandler=function(e){return function(t,e,a){var s=t.keyCode,i={ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey};a.prevent&&t.preventDefault(),a.stop&&t.stopPropagation();var r=document.activeElement,o=r.nodeName;if(!r.isContentEditable&&!c.includes(o)){var n=l(e,s,i);if(!n)return t;t.preventDefault(),n[t.type](t)}}(e,t._keyMap,i)},document.addEventListener("keydown",t._keyHandler),document.addEventListener("keyup",t._keyHandler)}function g(t){document.removeEventListener("keydown",t._keyHandler),document.removeEventListener("keyup",t._keyHandler)}var w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{bind:function(e,a){y(e,a,t)},componentUpdated:function(e,a){a.value!==a.oldValue&&(g(e),y(e,a,t))},unbind:g}},C={install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.directive("hotkey",w(e))},directive:w()},b=C;e.default=b}})},2377:(t,e,a)=>{"use strict";function s(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var i=s(a(9623)),r=s(a(4577)),o=["scroll","resize"],n={name:"mugen-scroll",props:{handler:{type:Function,required:!0},shouldHandle:{type:Boolean,default:!0},threshold:{type:Number,default:0},handleOnMount:{type:Boolean,default:!0},scrollContainer:{type:String}},mounted:function(){this.checkInView()},methods:{checkInView:function(){var t=this,e=function(){if(t.$refs.scroll){var e=r(t.$refs.scroll,{threshold:t.threshold});t.shouldHandle&&e&&t.handler()}};if(this.handleOnMount&&e(),this.scrollContainer){for(var a=this;(a=a.$parent)&&!this._scrollContainer;)t._scrollContainer=a.$refs[t.scrollContainer];this._scrollContainer&&this._scrollContainer.$el&&(this._scrollContainer=this._scrollContainer.$el)}this._scrollContainer=this._scrollContainer||window,this.check=i(e,200),o.forEach((function(e){return t._scrollContainer.addEventListener(e,t.check)}))}},render:function(t){return t("div",{staticClass:"mugen-scroll",ref:"scroll"},this.$slots.default)},beforeDestroy:function(){var t=this;o.forEach((function(e){return t._scrollContainer.removeEventListener(e,t.check)}))}};"undefined"!=typeof window&&window.Vue&&window.Vue.component(n.name,n),t.exports=n}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,a),r.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=function(){var t=this._self._c;return t("div",{attrs:{id:"vue-frontend-app"}},[t("router-view")],1)};t._withStripped=!0;function e(t,e,a,s,i,r,o,n){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=a,l._compiled=!0),s&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=c):i&&(c=n?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:l}}const s=e({name:"App"},t,[],!1,null,null,null).exports;var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"hotkey",rawName:"v-hotkey",value:t.hotkeys,expression:"hotkeys"}],attrs:{id:"wepos-main"}},[e("div",{staticClass:"content-product"},[e("div",{staticClass:"top-panel wepos-clearfix"},[e("div",{staticClass:"search-bar"},[e("product-search",{attrs:{products:t.products,settings:t.settings},on:{onProductAdded:t.addToCart}})],1),t._v(" "),e("div",{staticClass:"category"},[e("multiselect",{staticClass:"wepos-multiselect",attrs:{options:t.categories,selectLabel:"",deselectLabel:"",selectedLabel:"",placeholder:t.__("Select a category","wepos")},on:{select:t.handleCategorySelect,remove:t.handleCategoryRemove},scopedSlots:t._u([{key:"singleLabel",fn:function(e){return[t._v("\n            "+t._s(e.option.name)+"\n          ")]}},{key:"option",fn:function(a){return[e("span",[t._l(a.option.level,(function(e){return[t._v("\n                                   \n                              ")]})),t._v("\n                              "+t._s(a.option.name)+"\n                          ")],2)]}}]),model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}},[t._v(" "),t._v(" "),e("template",{slot:"noResult"},[e("div",{staticClass:"no-data-found"},[t._v(t._s(t.__("Not found","wepos")))])])],2)],1),t._v(" "),e("div",{staticClass:"toggle-view"},[e("div",{staticClass:"product-toggle"},[e("span",{staticClass:"toggle-icon list-view flaticon-menu-button-of-three-horizontal-lines",class:{active:"list"==t.productView},on:{click:function(e){t.productView="list"}}}),t._v(" "),e("span",{staticClass:"toggle-icon grid-view flaticon-menu",class:{active:"grid"==t.productView},on:{click:function(e){t.productView="grid"}}})])])]),t._v(" "),t.getBreadCrums.length>0?e("div",{staticClass:"breadcrumb"},[e("ul",[t._l(t.getBreadCrums,(function(a){return[e("router-link",{attrs:{tag:"li",to:{name:"Home",query:{category:a.id}}}},[e("a",[t._v(t._s(a.name))])])]}))],2),t._v(" "),e("span",{staticClass:"close-breadcrumb flaticon-cancel-music",on:{click:function(e){return e.preventDefault(),t.removeBreadcrums.apply(null,arguments)}}})]):t._e(),t._v(" "),e("div",{ref:"items-wrapper",staticClass:"items-wrapper",class:t.productView},[t.productLoading?t._e():[t._l(t.getFilteredProduct,(function(a){return t.getFilteredProduct.length>0?e("div",{staticClass:"item"},["simple"===a.type?[e("div",{staticClass:"item-wrap",class:{disabled:!t.hasStock(a)},on:{click:function(e){return e.preventDefault(),t.addToCart(a)}}},[e("div",{staticClass:"img"},[e("img",{attrs:{src:t.getProductImage(a),alt:t.getProductImageName(a)}})]),t._v(" "),"grid"===t.productView?e("div",{staticClass:"title"},[t._v("\n                "+t._s(t.truncateTitle(a.name,20))+"\n              ")]):e("div",{staticClass:"title"},[e("div",{staticClass:"product-name"},[t._v(t._s(a.name))]),t._v(" "),e("ul",{staticClass:"meta"},[a.sku?e("li",[e("span",{staticClass:"label"},[t._v(t._s(t.__("Sku :","wepos")))]),t._v(" "),e("span",{staticClass:"value"},[t._v(t._s(a.sku))])]):t._e(),t._v(" "),e("li",[e("span",{staticClass:"label"},[t._v(t._s(t.__("Price :","wepos")))]),t._v(" "),e("span",{staticClass:"value",domProps:{innerHTML:t._s(a.price_html)}})])])]),t._v(" "),e("span",{staticClass:"add-product-icon flaticon-add",class:t.productView})])]:t._e(),t._v(" "),"variable"===a.type?[e("v-popover",{attrs:{offset:"10","popover-base-class":"product-variation tooltip popover",placement:"left-end"}},[e("div",{staticClass:"item-wrap",on:{click:function(e){return t.selectVariationProduct(a)}}},[e("div",{staticClass:"img"},[e("img",{attrs:{src:t.getProductImage(a),alt:t.getProductImageName(a)}})]),t._v(" "),"grid"===t.productView?e("div",{staticClass:"title"},[t._v("\n                  "+t._s(t.truncateTitle(a.name,20))+"\n                ")]):e("div",{staticClass:"title"},[e("div",{staticClass:"product-name"},[t._v(t._s(a.name))]),t._v(" "),e("ul",{staticClass:"meta"},[e("li",[e("span",{staticClass:"label"},[t._v(t._s(t.__("Price :","wepos")))]),t._v(" "),e("span",{staticClass:"value",domProps:{innerHTML:t._s(a.price_html)}})])])]),t._v(" "),e("span",{staticClass:"add-product-icon flaticon-add",class:t.productView})]),t._v(" "),e("template",{slot:"popover"},[e("div",{staticClass:"variation-header"},[t._v("\n                  "+t._s(t.__("Select Variations","wepos"))+"\n                ")]),t._v(" "),e("div",{staticClass:"variation-body"},[t._l(a.attributes,(function(a){return[e("div",{staticClass:"attribute"},[e("p",[t._v(t._s(a.name))]),t._v(" "),e("div",{staticClass:"options"},[t._l(a.options,(function(s){return[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedAttribute[a.name],expression:"selectedAttribute[attribute.name]"}],attrs:{type:"radio"},domProps:{value:s,checked:t._q(t.selectedAttribute[a.name],s)},on:{change:function(e){return t.$set(t.selectedAttribute,a.name,s)}}}),t._v(" "),e("div",{staticClass:"box"},[t._v("\n                              "+t._s(s)+"\n                            ")])])]}))],2)])]}))],2),t._v(" "),e("div",{staticClass:"variation-footer"},[e("button",{attrs:{disabled:t.attributeDisabled},on:{click:function(e){return e.preventDefault(),t.addVariationProduct.apply(null,arguments)}}},[t._v("\n                    "+t._s(t.__("Add Product","wepos"))+"\n                  ")])])])],2)]:t._e()],2):t._e()})),t._v(" "),t.getFilteredProduct.length<=0?e("div",{staticClass:"no-product-found"},[e("img",{attrs:{src:t.wepos.assets_url+"/images/no-product.png",alt:"",width:"120px"}}),t._v(" "),e("p",[t._v(t._s(t.__("No Product Found","wepos")))])]):t._e()],t._v(" "),t.productLoading?e("div",{staticClass:"product-loading"},[e("div",{staticClass:"spinner spinner-loading"})]):t._e()],2)]),t._v(" "),e("div",{staticClass:"content-cart"},[e("div",{staticClass:"top-panel"},[e("customer-search",{on:{onCustomerSelected:t.selectCustomer}}),t._v(" "),e("div",{staticClass:"action"},[e("div",{staticClass:"more-options"},[e("v-popover",{attrs:{offset:"5","popover-base-class":"wepos-dropdown-menu tooltip popover",placement:"bottom-end",open:t.showQucikMenu}},[e("button",{staticClass:"wepos-button",on:{click:function(e){return e.preventDefault(),t.openQucikMenu()}}},[e("span",{staticClass:"more-icon flaticon-more"})]),t._v(" "),e("template",{slot:"popover"},[e("ul",[t._l(t.quickLinkListStart,(function(t,a){return e(t,{key:a-"1",tag:"component"})})),t._v(" "),e("li",[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.emptyCart.apply(null,arguments)}}},[e("span",{staticClass:"flaticon-empty-cart quick-menu-icon"}),t._v(t._s(t.__("Empty Cart","wepos")))])]),t._v(" "),e("li",[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openHelp.apply(null,arguments)}}},[e("span",{staticClass:"flaticon-information quick-menu-icon"}),t._v(t._s(t.__("Help","wepos")))])]),t._v(" "),e("li",{staticClass:"divider"}),t._v(" "),t._l(t.quickLinkList,(function(t,a){return e(t,{key:a,tag:"component"})})),t._v(" "),e("li",[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.logout.apply(null,arguments)}}},[e("span",{staticClass:"flaticon-logout quick-menu-icon"}),t._v(t._s(t.__("Logout","wepos")))])])],2)])],2)],1)])],1),t._v(" "),t._l(t.beforCartPanels,(function(t,a){return e(t,{key:a,tag:"component"})})),t._v(" "),t.settings.wepos_general?e("div",{staticClass:"cart-panel"},[e("div",{staticClass:"cart-content"},[e("table",{staticClass:"cart-table"},[e("thead",[e("tr",[e("th",{attrs:{width:"65%"}},[t._v(t._s(t.__("Product","wepos")))]),t._v(" "),e("th",{attrs:{width:"15%"}},[t._v(t._s(t.__("Qty","wepos")))]),t._v(" "),e("th",{attrs:{width:"30%"}},[t._v(t._s(t.__("Price","wepos")))]),t._v(" "),e("th"),t._v(" "),e("th")])]),t._v(" "),e("tbody",[t.cartdata.line_items.length>0?[t._l(t.cartdata.line_items,(function(a,s){return[e("tr",[e("td",{staticClass:"name",on:{click:function(e){return t.toggleEditQuantity(a,s)}}},[t._v("\n                  "+t._s(a.name)+"\n                  "),a.attribute.length>0&&"variable"===a.type?e("div",{staticClass:"attribute"},[e("ul",t._l(a.attribute,(function(a){return e("li",[e("span",{staticClass:"attr_name"},[t._v(t._s(a.name))]),t._v(": "),e("span",{staticClass:"attr_value"},[t._v(t._s(a.option))])])})),0)]):t._e(),t._v(" "),t.hasProductDiscount(a.product_id)?e("div",{staticClass:"fixed-discount"},[t._v("\n                    Discount: "+t._s(t.getProductDiscount(a.product_id)+" "+t.wepos.currency_format_symbol)+"\n                    "),e("span",{staticClass:"action"},[e("span",{staticClass:"flaticon-cancel-music",on:{click:e=>t.removeProductDiscount(e,a.product_id)}})])]):t._e()]),t._v(" "),e("td",{staticClass:"qty",on:{click:function(e){return t.toggleEditQuantity(a,s)}}},[t._v(t._s(a.quantity))]),t._v(" "),e("td",{staticClass:"price",on:{click:function(e){return t.toggleEditQuantity(a,s)}}},[a.on_sale?[e("span",{staticClass:"sale-price"},[t._v(t._s(t.formatPrice(a.quantity*a.sale_price)))]),t._v(" "),e("span",{staticClass:"regular-price"},[t._v(t._s(t.formatPrice(a.quantity*a.regular_price)))])]:[e("span",{staticClass:"sale-price"},[t._v(t._s(t.formatPrice(a.quantity*a.regular_price)))])]],2),t._v(" "),e("td",{staticClass:"action"},[e("span",{staticClass:"flaticon-right-arrow",class:{open:a.editQuantity},on:{click:function(e){return e.preventDefault(),t.toggleEditQuantity(a,s)}}})]),t._v(" "),e("td",{staticClass:"remove"},[e("span",{staticClass:"flaticon-cancel-music",on:{click:function(e){return e.preventDefault(),t.removeItem(s,a.product_id)}}})])]),t._v(" "),a.editQuantity&&a.stock_expiry?e("tr",{staticClass:"update-quantity-wrap"},[e("td",{attrs:{colspan:"5"}},[t.getExpiryData(a)?e("div",{staticStyle:{width:"100%"}},[e("span",{staticClass:"qty"},[t._v(t._s(t.__("Expiry","wepos")))]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedExpiryKey,expression:"selectedExpiryKey"}],attrs:{id:"search_by",name:"expiry"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedExpiryKey=e.target.multiple?a:a[0]}}},[e("option",{attrs:{value:"",disabled:""}},[t._v("Select Expiry")]),t._v(" "),e("option",{attrs:{selected:""},domProps:{value:null}},[t._v("No Expiry")]),t._v(" "),t._l(t.getExpiryData(a),(function(a){return[e("option",{domProps:{value:a.date}},[t._v(t._s(a.date))])]}))],2),t._v(" "),t.selectedExpiryKey?e("span",{staticClass:"add-expiry flaticon-add",on:{click:function(e){return e.preventDefault(),(()=>t.updateExpiryQuantity(s,t.selectedExpiryKey,1)).apply(null,arguments)}}}):t._e()]):t._e(),t._v(" "),a.expiry&&a.expiry.length>0?[e("div",{staticStyle:{display:"flex",width:"100%",margin:"4px","font-weight":"bold","text-align":"center","padding-bottom":"4px"}},[e("span",{staticClass:"qty",staticStyle:{flex:"1"}},[t._v(t._s(t.__("Date","wepos")))]),t._v(" "),e("span",{staticClass:"qty",staticStyle:{flex:"1"}},[t._v(t._s(t.__("Quantity","wepos")))]),t._v(" "),e("span",{staticClass:"qty",staticStyle:{flex:"1"}},[t._v(t._s(t.__("Action","wepos")))])]),t._v(" "),t._l(a.expiry,(function(i,r){var o;return e("div",{key:r,staticStyle:{display:"flex",width:"100%",margin:"4px","text-align":"center","align-items":"center"}},[e("span",{staticClass:"qty",staticStyle:{flex:"1"}},[t._v(t._s(i.date))]),t._v(" "),e("span",{staticClass:"qty-number",staticStyle:{flex:"1"}},[e("input",{attrs:{type:"number",min:"1",max:null!==(o=t.getExpiryInfo(a,i.date).quantity)&&void 0!==o?o:0,step:"1"},domProps:{value:i.quantity},on:{input:e=>e.target.value=t.handleExpireQuantityInput(e.target.value,e.target.min,e.target.max),change:e=>t.updateExpiryQuantity(s,i.date,e.target.value)}})]),t._v(" "),e("span",{staticClass:"qty-action",staticStyle:{flex:"1","text-align":"center"}},[e("span",{staticClass:"remove-expiry flaticon-cancel-music",on:{click:function(e){return e.preventDefault(),(()=>t.updateExpiryQuantity(s,i.date,0)).apply(null,arguments)}}})])])}))]:t._e()],2)]):t._e(),t._v(" "),a.editQuantity?e("tr",{staticClass:"update-quantity-wrap"},[e("td",{attrs:{colspan:"1"}},[e("span",{staticClass:"qty"},[t._v(t._s(t.__("Quantity","wepos")))]),t._v(" "),e("span",{staticClass:"qty-number"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.quantity,expression:"item.quantity"}],attrs:{type:"number",min:"1",step:"1"},domProps:{value:a.quantity},on:{input:function(e){e.target.composing||t.$set(a,"quantity",e.target.value)}}})]),t._v(" "),e("span",{staticClass:"qty-action"},[e("a",{staticClass:"add",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addQuantity(s)}}},[t._v("+")]),t._v(" "),e("a",{staticClass:"minus",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.removeQuantity(s)}}},[t._v("-")])])]),t._v(" "),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"4"}},[t.hasProductDiscount(a.product_id)?t._e():[e("span",{staticClass:"qty"},[t._v(t._s(t.__("Discount per Quantity","wepos")))]),t._v(" "),e("span",{staticClass:"input-addon"},[e("span",{staticClass:"currency"},[t._v(t._s(t.wepos.currency_format_symbol))]),t._v(" "),e("input",{attrs:{type:"number",min:"1",step:"1"},on:{change:e=>e.target.value>0&&t.setDiscount(e.target.value,"fixed_product",a.product_id)}})])]],2)]):t._e()]}))]:[e("tr",{staticClass:"no-item"},[e("td",{attrs:{colspan:"5"}},[e("img",{attrs:{src:t.wepos.assets_url+"/images/empty-cart.png",alt:"",width:"120px"}}),t._v(" "),e("p",[t._v(t._s(t.__("Empty Cart","wepos")))])])])]],2)])]),t._v(" "),e("div",{staticClass:"cart-calculation"},[e("form",{attrs:{autocomplete:"off"}},[e("table",{staticClass:"cart-total-table"},[e("tbody",[e("tr",{staticClass:"cart-meta-data"},[e("td",{staticClass:"label"},[t._v("\n                "+t._s(t.__("Subtotal","wepos"))+"\n                "),"incl"==t.settings.woo_tax.wc_tax_display_cart&&t.$store.getters["Cart/getTotalLineTax"]>0?e("span",{staticClass:"name"},[t._v("\n                                          "+t._s(t.__("Including Tax","wepos"))+"\n                                      ")]):t._e()]),t._v(" "),e("td",{staticClass:"price"},[t._v(t._s(t.formatPrice(t.$store.getters["Cart/getSubtotal"])))]),t._v(" "),e("td",{staticClass:"action"})]),t._v(" "),t.cartdata.coupon_lines.length>0?[t.hasFixedProductDiscount()?e("tr",[e("td",{staticClass:"label"},[t._v(t._s(t.__("Discount","wepos")))]),t._v(" "),e("td",{staticClass:"price"},[t._v("−"+t._s(t.formatPrice(Math.abs(t.totalFixedProductDiscount()))))]),t._v(" "),e("td",{staticClass:"action"},[e("span",{staticClass:"flaticon-cancel-music",on:{click:()=>t.cartdata.coupon_lines.map(((e,a)=>t.removeFeeLine(a)))}})])]):t._l(t.cartdata.coupon_lines,(function(a,s){return e("tr",{staticClass:"cart-meta-data"},["discount"==a.type?[e("td",{staticClass:"label"},[t._v(t._s(t.__("Discount","wepos"))+" "),e("span",{staticClass:"name"},[t._v(t._s(t.getDiscountAmount(a)))])]),t._v(" "),e("td",{staticClass:"price"},[t._v("−"+t._s(t.formatPrice(Math.abs(a.total))))]),t._v(" "),e("td",{staticClass:"action"},[e("span",{staticClass:"flaticon-cancel-music",on:{click:function(e){return t.removeCouponLine(s)}}})])]:[t.cartdata.coupon_lines[s].isEdit?[e("td",{staticClass:"label",attrs:{colspan:"2"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.feeData.name,expression:"feeData.name"}],ref:"fee_name",refInFor:!0,staticClass:"fee-name",attrs:{type:"text",placeholder:t.__("Fee Name","wepos")},domProps:{value:t.feeData.name},on:{input:function(e){e.target.composing||t.$set(t.feeData,"name",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.feeData.value,expression:"feeData.value"}],ref:"fee_total",refInFor:!0,staticClass:"fee-amount",attrs:{type:"number",min:"0",step:"any",placeholder:t.__("Total","wepos")},domProps:{value:t.feeData.value},on:{input:function(e){e.target.composing||t.$set(t.feeData,"value",e.target.value)}}}),t._v(" "),"yes"==t.settings.wepos_general.enable_fee_tax?[e("label",{attrs:{for:"fee-tax-status"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.feeData.tax_status,expression:"feeData.tax_status"}],staticClass:"fee-tax-status",attrs:{type:"checkbox",id:"fee-tax-status","true-value":"taxable","false-value":"none"},domProps:{checked:Array.isArray(t.feeData.tax_status)?t._i(t.feeData.tax_status,null)>-1:t._q(t.feeData.tax_status,"taxable")},on:{change:function(e){var a=t.feeData.tax_status,s=e.target,i=s.checked?"taxable":"none";if(Array.isArray(a)){var r=t._i(a,null);s.checked?r<0&&t.$set(t.feeData,"tax_status",a.concat([null])):r>-1&&t.$set(t.feeData,"tax_status",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.feeData,"tax_status",i)}}}),t._v(" "+t._s(t.__("Taxable","wepos")))]),t._v(" "),"taxable"==t.feeData.tax_status?e("select",{directives:[{name:"model",rawName:"v-model",value:t.feeData.tax_class,expression:"feeData.tax_class"}],staticClass:"fee-tax-class",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.feeData,"tax_class",e.target.multiple?a:a[0])}}},t._l(t.availableTax,(function(a){return e("option",{domProps:{value:"standard"==a.class?"":a.class}},[t._v("\n                            "+t._s(t.unSanitizeString(a.class))+" - "+t._s(a.percentage_rate)+"\n                          ")])})),0):t._e()]:t._e(),t._v(" "),e("button",{attrs:{disabled:""==t.feeData.name},on:{click:function(e){return e.preventDefault(),t.saveFee(s)}}},[t._v(t._s(t.__("Apply","wepos"))+"\n                      ")]),t._v(" "),e("button",{staticClass:"cancel",on:{click:function(e){return e.preventDefault(),t.cancelEditFee(s)}}},[t._v(t._s(t.__("Cancel","wepos")))])],2),t._v(" "),e("td",{staticClass:"action"},[e("span",{staticClass:"flaticon-cancel-music",on:{click:function(e){return t.removeCouponLine(s)}}})])]:[e("td",{staticClass:"label",on:{dblclick:function(e){return e.preventDefault(),t.editFeeData(s)}}},[t._v(t._s(t.__("Fee","wepos"))+" "),e("span",{staticClass:"name"},[t._v(t._s(a.name)+" "+t._s(t.getDiscountAmount(a)))])]),t._v(" "),e("td",{staticClass:"price"},[t._v(t._s(t.formatPrice(Math.abs(a.total))))]),t._v(" "),e("td",{staticClass:"action"},[e("span",{staticClass:"flaticon-cancel-music",on:{click:function(e){return t.removeCouponLine(s)}}})])]]],2)}))]:t._e(),t._v(" "),t.cartdata.fee_lines.length>0?t._l(t.cartdata.fee_lines,(function(a,s){return e("tr",{staticClass:"cart-meta-data"},["discount"==a.type?[e("td",{staticClass:"label"},[t._v(t._s(t.__("Discount","wepos"))+" "),e("span",{staticClass:"name"},[t._v(t._s(t.getDiscountAmount(a)))])]),t._v(" "),e("td",{staticClass:"price"},[t._v("−"+t._s(t.formatPrice(Math.abs(a.total))))]),t._v(" "),e("td",{staticClass:"action"},[e("span",{staticClass:"flaticon-cancel-music",on:{click:function(e){return t.removeFeeLine(s)}}})])]:[t.cartdata.fee_lines[s].isEdit?[e("td",{staticClass:"label",attrs:{colspan:"2"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.feeData.name,expression:"feeData.name"}],ref:"fee_name",refInFor:!0,staticClass:"fee-name",attrs:{type:"text",placeholder:t.__("Fee Name","wepos")},domProps:{value:t.feeData.name},on:{input:function(e){e.target.composing||t.$set(t.feeData,"name",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.feeData.value,expression:"feeData.value"}],ref:"fee_total",refInFor:!0,staticClass:"fee-amount",attrs:{type:"number",min:"0",step:"any",placeholder:t.__("Total","wepos")},domProps:{value:t.feeData.value},on:{input:function(e){e.target.composing||t.$set(t.feeData,"value",e.target.value)}}}),t._v(" "),"yes"==t.settings.wepos_general.enable_fee_tax?[e("label",{attrs:{for:"fee-tax-status"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.feeData.tax_status,expression:"feeData.tax_status"}],staticClass:"fee-tax-status",attrs:{type:"checkbox",id:"fee-tax-status","true-value":"taxable","false-value":"none"},domProps:{checked:Array.isArray(t.feeData.tax_status)?t._i(t.feeData.tax_status,null)>-1:t._q(t.feeData.tax_status,"taxable")},on:{change:function(e){var a=t.feeData.tax_status,s=e.target,i=s.checked?"taxable":"none";if(Array.isArray(a)){var r=t._i(a,null);s.checked?r<0&&t.$set(t.feeData,"tax_status",a.concat([null])):r>-1&&t.$set(t.feeData,"tax_status",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.feeData,"tax_status",i)}}}),t._v(" "+t._s(t.__("Taxable","wepos")))]),t._v(" "),"taxable"==t.feeData.tax_status?e("select",{directives:[{name:"model",rawName:"v-model",value:t.feeData.tax_class,expression:"feeData.tax_class"}],staticClass:"fee-tax-class",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.feeData,"tax_class",e.target.multiple?a:a[0])}}},t._l(t.availableTax,(function(a){return e("option",{domProps:{value:"standard"==a.class?"":a.class}},[t._v("\n                            "+t._s(t.unSanitizeString(a.class))+" - "+t._s(a.percentage_rate)+"\n                          ")])})),0):t._e()]:t._e(),t._v(" "),e("button",{attrs:{disabled:""==t.feeData.name},on:{click:function(e){return e.preventDefault(),t.saveFee(s)}}},[t._v(t._s(t.__("Apply","wepos"))+"\n                      ")]),t._v(" "),e("button",{staticClass:"cancel",on:{click:function(e){return e.preventDefault(),t.cancelEditFee(s)}}},[t._v(t._s(t.__("Cancel","wepos")))])],2),t._v(" "),e("td",{staticClass:"action"},[e("span",{staticClass:"flaticon-cancel-music",on:{click:function(e){return t.removeFeeLine(s)}}})])]:[e("td",{staticClass:"label",on:{dblclick:function(e){return e.preventDefault(),t.editFeeData(s)}}},[t._v(t._s(t.__("Fee","wepos"))+" "),e("span",{staticClass:"name"},[t._v(t._s(a.name)+" "+t._s(t.getDiscountAmount(a)))])]),t._v(" "),e("td",{staticClass:"price"},[t._v(t._s(t.formatPrice(Math.abs(a.total))))]),t._v(" "),e("td",{staticClass:"action"},[e("span",{staticClass:"flaticon-cancel-music",on:{click:function(e){return t.removeFeeLine(s)}}})])]]],2)})):t._e(),t._v(" "),t.$store.getters["Cart/getTotalTax"]?e("tr",{staticClass:"tax"},[e("td",{staticClass:"label"},[t._v("\n                "+t._s("incl"===t.settings.woo_tax.wc_tax_display_cart?t.__("Fee Tax","wepos"):t.__("Tax","wepos"))+"\n              ")]),t._v(" "),e("td",{staticClass:"price"},[t._v(t._s(t.formatPrice(t.$store.getters["Cart/getTotalTax"])))]),t._v(" "),e("td",{staticClass:"action"})]):t._e(),t._v(" "),e("tr",{staticClass:"cart-action"},[e("td",{attrs:{colspan:"3"}},[e("fee-keypad",{attrs:{name:t.__("Discount","wepos"),"short-key":"discount"},on:{inputfee:t.setDiscount}}),t._v(" "),e("fee-keypad",{attrs:{name:t.__("Fee","wepos"),"short-key":"fee"},on:{inputfee:t.setFee}}),t._v(" "),""==t.orderdata.customer_note?e("customer-note",{on:{addnote:t.addCustomerNote}}):t._e()],1)]),t._v(" "),t.orderdata.customer_note?e("tr",{staticClass:"note"},[e("td",{staticClass:"note-text",attrs:{colspan:"2"}},[t._v("\n                "+t._s(t.orderdata.customer_note)+"\n              ")]),t._v(" "),e("td",{staticClass:"action"},[e("span",{staticClass:"flaticon-cancel-music",on:{click:function(e){return e.preventDefault(),t.removeCustomerNote.apply(null,arguments)}}})])]):t._e(),t._v(" "),e("tr",{staticClass:"pay-now",on:{click:function(e){return t.initPayment()}}},[e("td",[t._v(t._s(t.__("Pay Now","wepos")))]),t._v(" "),e("td",{staticClass:"amount"},[t._v(t._s(t.formatPrice(t.$store.getters["Cart/getTotal"])))]),t._v(" "),t._m(0)])],2)])])])]):t._e()],2),t._v(" "),t.showPaymentReceipt?e("modal",{attrs:{width:"600px",height:"400px"},on:{close:function(e){return t.createNewSale()}}},[e("template",{slot:"body"},[e("div",{staticClass:"wepos-payment-receipt"},[e("div",{staticClass:"sale-completed"},[e("img",{attrs:{src:t.wepos.assets_url+"/images/sale-completed.png",alt:"",width:"120px"}}),t._v(" "),e("h2",[t._v(t._s(t.__("Sale Completed","wepos")))])]),t._v(" "),e("div",{staticClass:"print-section"},[e("print-receipt"),t._v(" "),e("button",{staticClass:"new-sale-btn",on:{click:function(e){return e.preventDefault(),t.createNewSale()}}},[e("span",{staticClass:"icon flaticon-add"}),t._v(" "),e("span",{staticClass:"label"},[t._v(t._s(t.__("New Sale","wepos")))])])],1)])])],2):t._e(),t._v(" "),t.showHelp?e("modal",{attrs:{width:"700px",height:"500px"},on:{close:function(e){return t.closeHelp()}}},[e("template",{slot:"body"},[e("div",{staticClass:"wepos-help-wrapper"},[e("h2",[t._v(t._s(t.__("Shortcut Keys","wepos")))]),t._v(" "),e("ul",[e("li",[e("span",{staticClass:"code"},[e("code",[t._v("f1")])]),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(t.__("Search Product","wepos")))])]),t._v(" "),e("li",[e("span",{staticClass:"code"},[e("code",[t._v("f2")])]),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(t.__("Scan Product","wepos")))])]),t._v(" "),e("li",[e("span",{staticClass:"code"},[e("code",[t._v("f3")])]),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(t.__("Toggle Product View","wepos")))])]),t._v(" "),e("li",[e("span",{staticClass:"code"},[e("code",[t._v("f4")])]),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(t.__("Add Fee in cart","wepos")))])]),t._v(" "),e("li",[e("span",{staticClass:"code"},[e("code",[t._v("f5")])]),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(t.__("Add Discount in cart","wepos")))])]),t._v(" "),e("li",[e("span",{staticClass:"code"},[e("code",[t._v("f6")])]),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(t.__("Add Customer note","wepos")))])]),t._v(" "),e("li",[e("span",{staticClass:"code"},[e("code",[t._v("f7")])]),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(t.__("Customer Search","wepos")))])]),t._v(" "),e("li",[e("span",{staticClass:"code"},[e("code",[t._v("shift+f7")])]),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(t.__("Add new Customer","wepos")))])]),t._v(" "),e("li",[e("span",{staticClass:"code"},[e("code",[t._v("f8")])]),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(t.__("Create New Sale","wepos")))])]),t._v(" "),e("li",[e("span",{staticClass:"code"},[e("code",[t._v("shift+f8")])]),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(t.__("Empty your cart","wepos")))])]),t._v(" "),e("li",[e("span",{staticClass:"code"},[e("code",[t._v("f9")])]),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(t.__("Go to payment receipt","wepos")))])]),t._v(" "),e("li",[e("span",{staticClass:"code"},[e("code",[t._v("f10")])]),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(t.__("Process Payment","wepos")))])]),t._v(" "),e("li",[e("span",{staticClass:"code"},[e("code",[t._v("ctrl/cmd+p")])]),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(t.__("Print Receipt","wepos")))])]),t._v(" "),e("li",[e("span",{staticClass:"code"},[e("code",[t._v("ctrl/cmd+?")])]),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(t.__("Show/Close(Toggle) Help","wepos")))])]),t._v(" "),e("li",[e("span",{staticClass:"code"},[e("code",[t._v("esc")])]),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(t.__("Close anything","wepos")))])])])])])],2):t._e(),t._v(" "),t.showModal?e("modal",{attrs:{width:"98%",height:"95vh"},on:{open:function(e){return t.focusCashInput()},close:function(e){return t.backToSale()},enterpressed:function(e){return t.processPayment()}}},[e("template",{slot:"body"},[e("div",{staticClass:"wepos-checkout-wrapper"},[e("div",{staticClass:"left-content"},[e("div",{staticClass:"header"},[t._v("\n            "+t._s(t.__("Sale Summary","wepos"))+"\n          ")]),t._v(" "),e("div",{staticClass:"content"},[e("table",{staticClass:"sale-summary-cart"},[e("tbody",t._l(t.cartdata.line_items,(function(a){return e("tr",[e("td",{staticClass:"name"},[t._v("\n                  "+t._s(a.name)+"\n                  "),a.attribute.length>0&&"variable"===a.type?e("div",{staticClass:"attribute"},[e("ul",t._l(a.attribute,(function(a){return e("li",[e("span",{staticClass:"attr_name"},[t._v(t._s(a.name))]),t._v(": "),e("span",{staticClass:"attr_value"},[t._v(t._s(a.option))])])})),0)]):t._e(),t._v(" "),a.expiry&&a.expiry.length>0?e("div",{staticClass:"attribute"},[e("ul",[e("li",{staticStyle:{display:"block"}},[e("span",{staticClass:"attr_name"},[t._v(t._s(t.__("Expiry :","wepos")))])]),t._v(" "),t._l(a.expiry,(function(a){return e("li",{staticStyle:{display:"block"}},[e("span",{staticClass:"attr_value"},[t._v(t._s(a.quantity)+"x "+t._s(a.date))])])}))],2)]):t._e(),t._v(" "),t.hasProductDiscount(a.product_id)?e("div",{staticStyle:{color:"#758598 !important","font-weight":"400 !important"}},[e("small",[t._v("Discount: "+t._s(t.getProductDiscount(a.product_id)+" "+t.wepos.currency_format_symbol)+"\n                    ")])]):t._e()]),t._v(" "),e("td",{staticClass:"quantity"},[t._v(t._s(a.quantity))]),t._v(" "),e("td",{staticClass:"price"},[a.on_sale?[e("span",{staticClass:"sale-price"},[t._v(t._s(t.formatPrice(a.quantity*a.sale_price)))]),t._v(" "),e("span",{staticClass:"regular-price"},[t._v(t._s(t.formatPrice(a.quantity*a.regular_price)))])]:[e("span",{staticClass:"sale-price"},[t._v(t._s(t.formatPrice(a.quantity*a.regular_price)))])]],2)])})),0)])]),t._v(" "),e("div",{staticClass:"footer"},[e("ul",[e("li",{staticClass:"wepos-clearfix"},[e("span",{staticClass:"wepos-left"},[t._v("\n                                      "+t._s(t.__("Subtotal","wepos"))+"\n                                      "),"incl"==t.settings.woo_tax.wc_tax_display_cart?e("span",{staticClass:"metadata"},[t._v("\n                                          "+t._s(t.__("Including Tax","wepos"))+"\n                                      ")]):t._e()]),t._v(" "),e("span",{staticClass:"wepos-right"},[t._v(t._s(t.formatPrice(t.$store.getters["Cart/getSubtotal"])))])]),t._v(" "),t.cartdata.coupon_lines.length>0?[t.hasFixedProductDiscount()?e("li",{staticClass:"wepos-clearfix"},[e("span",{staticClass:"wepos-left"},[t._v(t._s(t.__("Discount","wepos")))]),t._v(" "),e("span",{staticClass:"wepos-right"},[t._v("-"+t._s(t.formatPrice(Math.abs(t.totalFixedProductDiscount()))))])]):t._l(t.cartdata.coupon_lines,(function(a,s){return e("li",{staticClass:"wepos-clearfix"},["discount"==a.type?[e("span",{staticClass:"wepos-left"},[t._v(t._s(t.__("Discount","wepos"))+" "),e("span",{staticClass:"metadata"},[t._v(t._s(a.name)+" "+t._s(t.getDiscountAmount(a)))])]),t._v(" "),e("span",{staticClass:"wepos-right"},[t._v("-"+t._s(t.formatPrice(Math.abs(a.total))))])]:[e("span",{staticClass:"wepos-left"},[t._v(t._s(t.__("Fee","wepos"))+" "),e("span",{staticClass:"metadata"},[t._v(t._s(a.name)+" "+t._s(t.getDiscountAmount(a)))])]),t._v(" "),e("span",{staticClass:"wepos-right"},[t._v(t._s(t.formatPrice(a.total)))])]],2)}))]:t._e(),t._v(" "),t.cartdata.fee_lines.length>0?t._l(t.cartdata.fee_lines,(function(a,s){return e("li",{staticClass:"wepos-clearfix"},["discount"==a.type?[e("span",{staticClass:"wepos-left"},[t._v(t._s(t.__("Discount","wepos"))+" "),e("span",{staticClass:"metadata"},[t._v(t._s(a.name)+" "+t._s(t.getDiscountAmount(a)))])]),t._v(" "),e("span",{staticClass:"wepos-right"},[t._v("-"+t._s(t.formatPrice(Math.abs(a.total))))])]:[e("span",{staticClass:"wepos-left"},[t._v(t._s(t.__("Fee","wepos"))+" "),e("span",{staticClass:"metadata"},[t._v(t._s(a.name)+" "+t._s(t.getDiscountAmount(a)))])]),t._v(" "),e("span",{staticClass:"wepos-right"},[t._v(t._s(t.formatPrice(a.total)))])]],2)})):t._e(),t._v(" "),t.$store.getters["Cart/getTotalTax"]?e("li",{staticClass:"wepos-clearfix"},[e("span",{staticClass:"wepos-left"},[t._v(t._s(t.__("Tax","wepos")))]),t._v(" "),e("span",{staticClass:"wepos-right"},[t._v(t._s(t.formatPrice(t.$store.getters["Cart/getTotalTax"])))])]):t._e(),t._v(" "),e("li",{staticClass:"wepos-clearfix"},[e("span",{staticClass:"wepos-left"},[t._v(t._s(t.__("Order Total","wepos")))]),t._v(" "),e("span",{staticClass:"wepos-right"},[t._v(t._s(t.formatPrice(t.$store.getters["Cart/getTotal"])))])]),t._v(" "),e("li",{staticClass:"wepos-clearfix"},[e("span",{staticClass:"wepos-left"},[t._v(t._s(t.__("Pay","wepos")))]),t._v(" "),e("span",{staticClass:"wepos-right"},[t._v(t._s(t.formatPrice(t.$store.getters["Cart/getTotal"])))])])],2)])]),t._v(" "),e("div",{staticClass:"right-content"},[e("div",{staticClass:"header wepos-clearfix"},[e("h2",{staticClass:"wepos-left"},[t._v(t._s(t.__("Pay","wepos")))]),t._v(" "),e("span",{staticClass:"pay-amount wepos-right"},[t._v(t._s(t.formatPrice(t.$store.getters["Cart/getTotal"])))])]),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"payment-gateway"},[t.availableGateways.length>0?[t._l(t.availableGateways,(function(a){return e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedGateway,expression:"selectedGateway"}],attrs:{type:"radio",name:"gateway",checked:""},domProps:{value:a.id,checked:t._q(t.selectedGateway,a.id)},on:{change:function(e){t.selectedGateway=a.id}}}),t._v(" "),e("span",{staticClass:"gateway",class:`gateway-${a.id}`},[t._v("\n                                          "+t._s(a.title)+"\n                                      ")])])})),t._v(" "),t.emptyGatewayDiv>0?t._l(t.emptyGatewayDiv,(function(t){return e("label",{key:t},[e("span",{staticClass:"grid-placeholder"})])})):t._e()]:[e("p",[t._v(t._s(t.__("No gateway found","wepos")))])]],2),t._v(" "),"wepos_cash"==t.orderdata.payment_method?[t._v("\n              "+t._s()+"\n              "),e("div",{staticClass:"payment-option"},["yes"===t.settings.wepos_general.enable_partial_payment?e("div",{staticClass:"payment-type-wrapper"},[e("div",{staticClass:"payment-type-body"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentType,expression:"paymentType"}],ref:"paymenttype",attrs:{type:"radio",value:"full",checked:""},domProps:{checked:t._q(t.paymentType,"full")},on:{change:function(e){t.paymentType="full"}}}),t._v(" "),e("span",[t._v("Full Payment")])]),t._v(" "),e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentType,expression:"paymentType"}],ref:"paymenttype",attrs:{type:"radio",value:"partial"},domProps:{checked:t._q(t.paymentType,"partial")},on:{change:function(e){t.paymentType="partial"}}}),t._v(" "),e("span",[t._v("Partial Payment")])])])]):t._e(),t._v(" "),e("div",{staticClass:"payment-amount"},[e("div",{staticClass:"input-part"},[e("div",{staticClass:"input-wrap"},[e("p",[t._v(t._s(t.__("Cash","wepos")))]),t._v(" "),e("div",{staticClass:"input-addon"},[e("span",{staticClass:"currency"},[t._v(t._s(t.wepos.currency_format_symbol))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cashAmount,expression:"cashAmount"}],ref:"cashamount",attrs:{id:"input-cash-amount",type:"text"},domProps:{value:t.cashAmount},on:{input:function(e){e.target.composing||(t.cashAmount=e.target.value)}}})])])]),t._v(" "),t.dueAmountPartial>0&&"partial"===t.paymentType?e("div",{staticClass:"due-money"},[e("p",[t._v(t._s(t.__("Due money","wepos"))+": "+t._s(t.formatPrice(t.dueAmountPartial)))])]):e("div",{staticClass:"change-money"},[e("p",[t._v(t._s(t.__("Change money","wepos"))+": "+t._s(t.formatPrice(t.changeAmount)))])])])])]:t._e(),t._v(" "),t._l(t.availableGatewayContent,(function(a,s){return e(a,{key:s,tag:"component",attrs:{availablegateways:t.availableGateways}})}))],2),t._v(" "),e("div",{staticClass:"footer wepos-clearfix"},[e("a",{staticClass:"back-btn wepos-left",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.backToSale()}}},[t._v(t._s(t.__("Back to Sale","wepos")))]),t._v(" "),e("button",{staticClass:"process-checkout-btn wepos-right",attrs:{disabled:!t.$store.getters["Order/getCanProcessPayment"]},on:{click:function(e){return e.preventDefault(),t.processPayment.apply(null,arguments)}}},[t._v(t._s(t.__("Process Payment","wepos"))+"\n            ")])])])])])],2):t._e(),t._v(" "),e("overlay",{attrs:{show:t.showOverlay}}),t._v(" "),t.showReceiptHtml?e("print-receipt-html",{directives:[{name:"show",rawName:"v-show",value:t.createprintreceipt,expression:"createprintreceipt"}],attrs:{printdata:t.printdata,settings:t.settings}}):t._e(),t._v(" "),t._l(t.afterMainContents,(function(a,s){return e(a,{key:s,tag:"component",attrs:{orderdata:t.orderdata,printdata:t.printdata}})}))],2)};i._withStripped=!0;var r=function(){var t=this,e=t._self._c;return t.show?e("div",{staticClass:"overlay"}):t._e()};r._withStripped=!0;const o=e({name:"Overlay",props:{show:{type:Boolean}}},r,[],!1,null,null,null).exports;var n=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.outside,expression:"outside"}],staticClass:"search-box"},[e("form",{attrs:{action:"",autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.handleProductScan.apply(null,arguments)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.serachInput,expression:"serachInput"}],ref:"productSearch",attrs:{type:"text",name:"search",id:"product-search",placeholder:t.placeholder},domProps:{value:t.serachInput},on:{focus:function(e){return e.preventDefault(),t.triggerFocus.apply(null,arguments)},keyup:function(e){return e.preventDefault(),t.searchProduct.apply(null,arguments)},input:function(e){e.target.composing||(t.serachInput=e.target.value)}}}),t._v(" "),"product"==t.mode?e("span",{staticClass:"search-icon flaticon-musica-searcher"}):t._e(),t._v(" "),"scan"==t.mode?e("span",{staticClass:"search-icon flaticon-supermarket-scanner"}):t._e(),t._v(" "),e("div",{directives:[{name:"hotkey",rawName:"v-hotkey",value:t.hotkeys,expression:"hotkeys"}],staticClass:"search-type"},[e("a",{class:{active:"product"==t.mode},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changeMode("product")}}},[t._v(t._s(t.__("Product","wepos")))]),t._v(" "),e("a",{class:{active:"scan"==t.mode},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changeMode("scan")}}},[t._v(t._s(t.__("Scan","wepos")))])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showResults&&"product"==t.mode,expression:"showResults && mode=='product'"}],staticClass:"search-result"},[t.searchableProduct.length?e("div",[e("keyboard-control",{attrs:{listLength:t.searchableProduct.length},on:{"key-down":t.onKeyDown,"key-up":t.onKeyUp},scopedSlots:t._u([{key:"default",fn:function(a){let{selectedIndex:s}=a;return t._l(t.searchableProduct,(function(a,i){return e("li",{key:i,staticClass:"product-search-item",class:{selected:i===s}},["simple"==a.type?[e("a",{staticClass:"wepos-clearfix",attrs:{href:"#"},on:{click:function(e){return t.addToCartAction(a)}}},[t._v(t._s(a.name)+"\n                                    "),e("span",{staticClass:"price"},[t._v(t._s(t.formatPrice(a.price)))]),t._v(" "),a.sku?e("span",{staticClass:"sku"},[t._v(t._s(a.sku))]):t._e(),t._v(" "),e("span",{staticClass:"action flaticon-enter-arrow wepos-right"})])]:t._e(),t._v(" "),"variable"==a.type?[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.selectVariation(a)}}},[t._v(t._s(a.name)+"\n                                    "),e("span",{staticClass:"price"},[t._v(t._s(t.formatPrice(a.price)))]),t._v(" "),a.sku?e("span",{staticClass:"sku"},[t._v(t._s(a.sku))]):t._e(),t._v(" "),e("span",{staticClass:"action flaticon-enter-arrow wepos-right"})])]:t._e()],2)}))}}],null,!1,2881840290)})],1):e("div",{staticClass:"no-data-found"},[t._v("\n                "+t._s(t.__("No product found","wepos"))+"\n            ")]),t._v(" "),e("div",{staticClass:"suggession"},[e("span",{staticClass:"term"},[e("span",{staticClass:"flaticon-swap"}),t._v(" "+t._s(t.__("to navigate","wepos"))+"\n                ")]),t._v(" "),e("span",{staticClass:"term"},[e("span",{staticClass:"flaticon-enter-arrow"}),t._v(" "+t._s(t.__("to select","wepos"))+"\n                ")]),t._v(" "),e("span",{staticClass:"term"},[e("strong",[t._v("esc")]),t._v(" "+t._s(t.__("to dismiss","wepos"))+"\n                ")])])])]),t._v(" "),t.showVariationModal?e("modal",{attrs:{title:t.__("Select Variations","wepos"),width:"500px",height:"auto",footer:!0,header:!0},on:{close:function(e){t.showVariationModal=!1}}},[e("template",{slot:"body"},t._l(t.selectedVariationProduct.attributes,(function(a){return e("div",{staticClass:"variation-attribute-wrapper"},[e("div",{staticClass:"attribute"},[e("p",[t._v(t._s(a.name))]),t._v(" "),e("div",{staticClass:"options"},[t._l(a.options,(function(s){return[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.chosenAttribute[a.name],expression:"chosenAttribute[attribute.name]"}],attrs:{type:"radio"},domProps:{value:s,checked:t._q(t.chosenAttribute[a.name],s)},on:{change:function(e){return t.$set(t.chosenAttribute,a.name,s)}}}),t._v(" "),e("div",{staticClass:"box"},[t._v("\n                                    "+t._s(s)+"\n                                ")])])]}))],2)])])})),0),t._v(" "),e("template",{slot:"footer"},[e("button",{staticClass:"add-variation-btn",attrs:{disabled:t.attributeDisabled},on:{click:function(e){return t.addVariationProduct()}}},[t._v(t._s(t.__("Add Product","wepos")))])])],2):t._e()],1)};n._withStripped=!0;const c=e({props:{listLength:Number},data:()=>({selectedIndex:0}),render(t){return t("ul",this.$scopedSlots.default({selectedIndex:this.selectedIndex}))},methods:{keyHandler(t){const e=t.which||t.keyCode;38===e||t.shiftKey&&9===e?(this.handleKeyUp(t),this.$emit("key-up")):40!==e&&9!==e||(this.handleKeyDown(t),this.$emit("key-down"))},handleKeyUp(t){t.preventDefault(),this.selectedIndex<=0?this.selectedIndex=this.listLength-1:this.selectedIndex>0&&this.selectedIndex<=this.listLength-1&&this.selectedIndex--},handleKeyDown(t){t.preventDefault(),this.selectedIndex<0||this.selectedIndex===this.listLength-1?this.selectedIndex=0:this.selectedIndex>=0&&this.selectedIndex<this.listLength-1&&this.selectedIndex++},addKeyHandler(t){window.addEventListener("keydown",this.keyHandler)},removeKeyHandler(){window.removeEventListener("keydown",this.keyHandler)}},created(){this.addKeyHandler()},destroyed(){this.removeKeyHandler()}},undefined,undefined,!1,null,null,null).exports;a(671);let l=wepos_get_lib("Modal");const u=e({name:"ProductInlineSearch",props:{products:{type:Array,default:()=>[]},settings:{type:Object,default:()=>({})}},components:{Modal:l,KeyboardControl:c},data:()=>({showResults:!1,showVariationModal:!1,mode:"scan",serachInput:"",searchableProduct:[],selectedVariationProduct:{},attributeDisabled:!0,chosenAttribute:{}}),computed:{placeholder(){return"scan"==this.mode?this.__("Scan your product","wepos"):this.__("Search product by typing","wepos")},hotkeys(){return{f1:this.changeProductSearch,f2:this.changeScan,esc:this.searchClose}}},watch:{chosenAttribute(t,e){Object.keys(t).length==this.selectedVariationProduct.attributes.length&&(this.attributeDisabled=!1)}},methods:{changeScan(t){t.preventDefault(),this.changeMode("scan")},changeProductSearch(t){t.preventDefault(),this.changeMode("product")},searchClose(){this.showResults=!1,this.showVariationModal=!1,this.changeMode("scan"),this.$refs.productSearch.blur()},onKeyDown(){jQuery(".product-search-item.selected").next().children("a").focus()},onKeyUp(){jQuery(".product-search-item.selected").prev().children("a").focus()},triggerFocus(){this.showResults=!0,this.$emit("onfocus")},outside(){this.showResults=!1,this.$emit("onblur")},changeMode(t){this.mode=t,"scan"==this.mode&&(this.searchableProduct=[],this.showResults=!1),this.$refs.productSearch.focus()},handleProductScan(){if("product"!=this.mode){var t=this.settings.wepos_general,e="custom"==t.barcode_scanner_field?"barcode":t.barcode_scanner_field,a={},s=this.products.filter((t=>{if("simple"==t.type&&t[e].toString()==this.serachInput)return!0;if("variable"==t.type){var a=!1;if(t.variations.length>0&&weLo_.forEach(t.variations,((t,s)=>{t[e].toString()==this.serachInput&&(a=!0)})),a)return!0}return!1}));if(s.length>0)if("variable"==(s=s[0]).type)(a=s.variations.filter((t=>t[e].toString()==this.serachInput))[0]).parent_id=s.id,a.type=s.type,a.name=s.name,this.$emit("onProductAdded",a);else this.$emit("onProductAdded",s);this.serachInput=""}},searchProduct(t){this.serachInput&&"product"==this.mode&&(this.searchableProduct=this.products.filter((t=>-1!=t.id.toString().indexOf(this.serachInput)||(-1!=t.name.toString().toLowerCase().indexOf(this.serachInput.toLowerCase())||-1!=t.sku.indexOf(this.serachInput)))))},selectVariation(t){this.selectedVariationProduct=t,this.showVariationModal=!0},addVariationProduct(){var t=this.findMatchingVariations(this.selectedVariationProduct.variations,this.chosenAttribute)[0];t.parent_id=this.selectedVariationProduct.id,t.type=this.selectedVariationProduct.type,t.name=this.selectedVariationProduct.name,this.$emit("onProductAdded",t),this.showVariationModal=!1,this.chosenAttribute={}},addToCartAction(t){this.$emit("onProductAdded",t)}},mounted(){this.$refs.productSearch.focus()}},n,[],!1,null,null,null).exports;var d=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onblur,expression:"onblur"},{name:"hotkey",rawName:"v-hotkey",value:t.hotkeys,expression:"hotkeys"}],staticClass:"customer-search-box"},[e("form",{attrs:{action:"",autocomplete:"off"}},[e("svg",{staticClass:"customer-icon",attrs:{width:"19px",height:"19px",viewBox:"0 0 19 19",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[e("defs",[e("linearGradient",{attrs:{x1:"14.5524094%",y1:"14.6909544%",x2:"82.7722259%",y2:"85.2519444%",id:"linearGradient-1"}},[e("stop",{attrs:{"stop-color":"#C444FB",offset:"0%"}}),t._v(" "),e("stop",{attrs:{"stop-color":"#5B56D7",offset:"100%"}})],1)],1),t._v(" "),e("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[e("g",{attrs:{id:"POS-Design---Dokan-P2",transform:"translate(-759.000000, -27.000000)"}},[e("g",{attrs:{id:"Group",transform:"translate(759.000000, 27.000000)"}},[e("circle",{attrs:{id:"Oval",fill:"url(#linearGradient-1)","fill-rule":"nonzero",cx:"9.5",cy:"9.5",r:"9.5"}}),t._v(" "),e("g",{attrs:{id:"flaticon1543304699-svg-2",transform:"translate(9.500000, 9.500000) scale(-1, 1) translate(-9.500000, -9.500000) translate(6.000000, 5.000000)"}},[e("g",{attrs:{id:"flaticon1543304699-svg"}},[e("path",{attrs:{d:"M3.31578947,4.40159143 C4.27870463,4.40159143 5.0593751,3.41627143 5.0593751,2.20080857 C5.0593751,0.98532 4.80306952,0 3.31578947,0 C1.82850943,0 1.57215436,0.98532 1.57215436,2.20080857 C1.57215436,3.41627143 2.35282482,4.40159143 3.31578947,4.40159143 Z",id:"Path",fill:"#FFFFFF"}}),t._v(" "),e("path",{attrs:{d:"M0.0616980658,7.82884897 C0.0604730658,7.62453402 0.0592480658,7.77128348 0.0616980658,7.82884897 Z",id:"Path",fill:"#000000"}}),t._v(" "),e("path",{attrs:{d:"M6.64682715,7.85749962 C6.65070632,7.82585407 6.64815424,7.63794608 6.64682715,7.85749962 Z",id:"Path",fill:"#000000"}}),t._v(" "),e("path",{attrs:{d:"M6.60522584,7.67306571 C6.57293401,5.5557 6.30682954,4.95236571 4.27051414,4.57045714 C4.27051414,4.57045714 3.98387156,4.95002571 3.31576473,4.95002571 C2.64765789,4.95002571 2.36096583,4.57045714 2.36096583,4.57045714 C0.34687117,4.9482 0.0645836606,5.54258571 0.0274666143,7.60428 C0.0244230165,7.77263143 0.0230125687,7.78147714 0.0224681854,7.76193429 C0.0225919089,7.79855143 0.0227403771,7.86628286 0.0227403771,7.98438857 C0.0227403771,7.98438857 0.507538492,9 3.31576473,9 C6.12394148,9 6.60878908,7.98438857 6.60878908,7.98438857 C6.60878908,7.90850571 6.60883857,7.85574 6.6089128,7.81984286 C6.60836842,7.83192857 6.60727965,7.80850286 6.60522584,7.67306571 Z",id:"Path",fill:"#FFFFFF"}})])])])])])]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.searchSelect,expression:"searchSelect"}],attrs:{id:"search_by",name:"search_by"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.searchSelect=e.target.multiple?a:a[0]},t.searchCustomer]}},[e("option",{attrs:{value:"",disabled:""}},[t._v("Search By")]),t._v(" "),e("option",{attrs:{value:"default",selected:""}},[t._v("Default")]),t._v(" "),e("option",{attrs:{value:"nif"}},[t._v("NIF")])]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.serachInput,expression:"serachInput"}],ref:"customerSearch",attrs:{type:"text",name:"customer_search",id:"customer-search",placeholder:t.__("Search customer","wepos")},domProps:{value:t.serachInput},on:{focus:function(e){return e.preventDefault(),t.triggerFocus.apply(null,arguments)},keyup:t.searchCustomer,input:function(e){e.target.composing||(t.serachInput=e.target.value)}}}),t._v(" "),e("span",{staticClass:"add-new-customer flaticon-add",on:{click:function(e){return e.preventDefault(),t.addNewCustomer()}}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showCustomerResults,expression:"showCustomerResults"}],staticClass:"search-result"},[t.customers.length?e("div",[e("keyboard-control",{attrs:{listLength:t.customers.length},on:{"key-down":t.onKeyDown,"key-up":t.onKeyUp},scopedSlots:t._u([{key:"default",fn:function(a){let{selectedIndex:s}=a;return t._l(t.customers,(function(a,i){var r,o;return e("li",{key:i,staticClass:"customer-search-item",class:{selected:i===s}},[e("a",{staticClass:"wepos-clearfix",attrs:{href:"#"},on:{click:function(e){return t.selectCustomer(a)}}},[e("span",{staticClass:"avatar wepos-left"},[e("img",{attrs:{src:a.avatar_url,alt:a.first_name+" "+a.last_name}})]),t._v(" "),e("span",{staticClass:"name wepos-left"},[t._v(t._s(a.first_name+" "+a.last_name)+"\n                                  "),e("span",{staticClass:"metadata"},[t._v(t._s("ID:"+a.id))]),t._v(" "),e("span",{staticClass:"metadata"},[t._v(t._s("Email:"+a.email))]),t._v(" "),null!==(r=a.billing)&&void 0!==r&&r.nif?e("span",{staticClass:"metadata"},[t._v(t._s("NIF:"+(null===(o=a.billing)||void 0===o?void 0:o.nif)))]):t._e()]),t._v(" "),e("span",{staticClass:"action flaticon-enter-arrow wepos-right"})])])}))}}],null,!1,1877721372)})],1):e("div",{staticClass:"no-data-found"},[t._v("\n                "+t._s(t.__("No customer found","wepos"))+"\n            ")]),t._v(" "),e("div",{staticClass:"suggession"},[e("span",{staticClass:"term"},[e("span",{staticClass:"flaticon-swap"}),t._v(" "+t._s(t.__("to navigate","wepos"))+"\n                ")]),t._v(" "),e("span",{staticClass:"term"},[e("span",{staticClass:"flaticon-enter-arrow"}),t._v(" "+t._s(t.__("to select","wepos"))+"\n                ")]),t._v(" "),e("span",{staticClass:"term"},[e("strong",[t._v("esc")]),t._v(" "+t._s(t.__("to dismiss","wepos"))+"\n                ")])])])]),t._v(" "),t.showNewCustomerModal?e("modal",{attrs:{title:t.__("Add New Customer","wepos"),width:"700px",footer:!0,header:!0},on:{close:t.closeNewCustomerModal}},[e("template",{slot:"body"},[e("div",{staticClass:"wepos-new-customer-form"},[e("form",{staticClass:"wepos-form",attrs:{action:"",autocomplete:"off"}},[e("div",{staticClass:"form-row col-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.first_name,expression:"customer.first_name"}],attrs:{type:"text",placeholder:t.__("First Name","wepos")},domProps:{value:t.customer.first_name},on:{input:function(e){e.target.composing||t.$set(t.customer,"first_name",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.last_name,expression:"customer.last_name"}],attrs:{type:"text",placeholder:t.__("Last Name","wepos")},domProps:{value:t.customer.last_name},on:{input:function(e){e.target.composing||t.$set(t.customer,"last_name",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-row col-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.email,expression:"customer.email"}],attrs:{type:"email",placeholder:t.__("Email","wepos")},domProps:{value:t.customer.email},on:{input:function(e){e.target.composing||t.$set(t.customer,"email",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-row"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.address_1,expression:"customer.address_1"}],attrs:{type:"text",placeholder:t.__("Address","wepos")},domProps:{value:t.customer.address_1},on:{input:function(e){e.target.composing||t.$set(t.customer,"address_1",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-row col-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.nif,expression:"customer.nif"}],attrs:{type:"number",placeholder:t.__("NIF (optional)","wepos")},domProps:{value:t.customer.nif},on:{input:function(e){e.target.composing||t.$set(t.customer,"nif",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.phone,expression:"customer.phone"}],attrs:{type:"text",placeholder:t.__("Phone (optional)","wepos")},domProps:{value:t.customer.phone},on:{input:function(e){e.target.composing||t.$set(t.customer,"phone",e.target.value)}}})])])])]),t._v(" "),e("template",{slot:"footer"},[e("button",{staticClass:"add-new-customer-btn add-variation-btn",attrs:{disabled:t.isDisabled},on:{click:function(e){return t.createCustomer()}}},[t._v(t._s(t.__("Add Customer","wepos")))])])],2):t._e(),t._v(" "),t.showNewCustomerCreatedModal?e("modal",{attrs:{width:"600px",height:"450px"},on:{close:t.closeNewCustomerCreatedModal}},[e("template",{slot:"body"},[e("div",{staticClass:"wepos-payment-receipt"},[e("div",{staticClass:"sale-completed"},[e("img",{attrs:{src:t.wepos.assets_url+"/images/sale-completed.png",alt:"",width:"120px"}}),t._v(" "),e("h2",[t._v(t._s(t.__("New customer created","wepos")))])]),t._v(" "),e("div",{staticClass:"print-section"},[e("table",{staticClass:"customer-table"},[e("tr",[e("th",[t._v("Customer ID")]),t._v(" "),e("td",[t._v(t._s(t.created_customer.id))])]),t._v(" "),e("tr",[e("th",[t._v("Customer Name")]),t._v(" "),e("td",[t._v(t._s(t.created_customer.first_name)+" "+t._s(t.created_customer.last_name))])]),t._v(" "),e("tr",[e("th",[t._v("Customer Email")]),t._v(" "),e("td",[t._v(t._s(t.created_customer.email))])])])])])])],2):t._e()],1)};d._withStripped=!0;var p=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"wepos-print-receipt"}},[e("button",{staticClass:"print-btn",on:{click:function(e){return e.preventDefault(),t.printReceipt()}}},[e("span",{staticClass:"icon flaticon-printer"}),t._v(" "),e("span",{staticClass:"label"},[t._v(t._s(t.__("Print Receipt","wepos")))])])])};p._withStripped=!0;const _=e({name:"ReceiptPrint",methods:{printReceipt(){setTimeout((()=>{window.print()}),500)},handlePrintingPopup(t){let e=this;"Enter"===t.code&&e.$store.getters["Order/getCanProcessPayment"]&&e.printReceipt()},handlePrintReceiptSubmit(){document.addEventListener("keypress",this.handlePrintingPopup)}},mounted(){this.handlePrintReceiptSubmit()},destroyed(){document.removeEventListener("keypress",this.handlePrintingPopup)}},p,[],!1,null,null,null).exports;const m=e({name:"CustomerSearch",components:{PrintReceipt:_,Modal:wepos_get_lib("Modal"),KeyboardControl:c},data:()=>({submitDisable:!1,customers:[],customer:{email:"",first_name:"",last_name:"",address_1:"",nif:"",phone:""},created_customer:{},showNewCustomerCreatedModal:!1,showCustomerResults:!1,serachInput:"",searchSelect:"default",showNewCustomerModal:!1,isDisabled:!0}),computed:{hotkeys(){return{f7:this.focusCustomerSearch,"shift+f7":this.addNewCustomer,esc:this.searchClose}},orderdata(){return this.$store.state.Order.orderdata}},watch:{customer:{handler(t){this.isDisabled=!0,void 0!==t.first_name&&""!=t.first_name.trim()&&void 0!==t.last_name&&""!=t.last_name.trim()&&void 0!==t.email&&""!=t.email.trim()&&(this.isDisabled=!1)},deep:!0},"orderdata.customer_id"(t){this.serachInput=t?this.orderdata.billing.first_name+" "+this.orderdata.billing.last_name:""}},methods:{focusCustomerSearch(t){t.preventDefault(),this.$refs.customerSearch.focus()},searchClose(){this.showCustomerResults=!1,this.serachInput="",this.searchSelect="default",this.showNewCustomerModal=!1,this.$refs.customerSearch.blur()},addNewCustomer(){this.showNewCustomerModal=!0},onKeyDown(){jQuery(".customer-search-item.selected").next().children("a").focus()},onKeyUp(){jQuery(".customer-search-item.selected").prev().children("a").focus()},triggerFocus(){this.showCustomerResults=!0,this.$emit("onfocus")},onblur(){this.showCustomerResults=!1,this.$emit("onblur")},closeNewCustomerModal(){this.customer={id:"",email:"",first_name:"",last_name:"",address_1:"",nif:"",phone:""},this.showNewCustomerModal=!1},closeNewCustomerCreatedModal(){this.created_customer={},this.showNewCustomerCreatedModal=!1},searchCustomer(){this.serachInput&&this.searchSelect?wepos.api.get(wepos.rest.root+wepos.rest.posversion+"/customers?search="+this.serachInput+"&search_by="+this.searchSelect).done((t=>{this.customers=t})):this.$emit("onCustomerSelected",{})},selectCustomer(t){this.$emit("onCustomerSelected",t),this.serachInput=t.first_name+" "+t.last_name,this.showCustomerResults=!1},createCustomer(){if(this.customer.email){var t={email:this.customer.email,first_name:this.customer.first_name,last_name:this.customer.last_name,username:this.customer.email,password:this.generatePassword(20),billing:{first_name:this.customer.first_name,last_name:this.customer.last_name,address_1:this.customer.address_1,nif:this.customer.nif,phone:this.customer.phone,email:this.customer.email}},e=jQuery(".wepos-new-customer-form");e.block({message:null,overlayCSS:{background:"#fff url("+wepos.ajax_loader+") no-repeat center",opacity:.4}}),wepos.api.post(wepos.rest.root+wepos.rest.posversion+"/customers",t).done((t=>{this.serachInput=t.first_name+" "+t.last_name,this.$emit("onCustomerSelected",t),e.unblock(),this.closeNewCustomerModal(),this.created_customer=t,this.showNewCustomerCreatedModal=!0})).fail((t=>{e.unblock(),alert(t.responseJSON.message)}))}else alert(this.__("Please enter an email address for customer","wepos"))},generatePassword(t){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",a="",s=0,i=e.length;s<t;++s)a+=e.charAt(Math.floor(Math.random()*i));return a}},created(){this.eventBus.$on("emptycart",(t=>{this.serachInput=""}));var t=JSON.parse(localStorage.getItem("orderdata"));"undefined"!=t.customer_id&&0!=t.customer_id&&(this.serachInput=t.billing.first_name+" "+t.billing.last_name)}},d,[],!1,null,null,null).exports;var v=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"hotkey",rawName:"v-hotkey",value:t.hotkeys,expression:"hotkeys"}],staticClass:"wepos-fee-keypad-wrap",class:t.className},[e("v-popover",{attrs:{offset:"5","popover-base-class":"fee-keypad tooltip popover",placement:"top",open:t.viewFeeKeypad}},[e("a",{attrs:{href:"#"},on:{click:t.showFeeKeypad}},[t._v(t._s(t.__("Add","wepos"))+" "+t._s(t.name))]),t._v(" "),e("template",{slot:"popover"},[e("form",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.displayValue,expression:"displayValue"}],ref:"feeinput",attrs:{type:"text"},domProps:{value:t.displayValue},on:{input:function(e){e.target.composing||(t.displayValue=e.target.value)}}})]),t._v(" "),e("keyboard",{attrs:{layouts:t.layout()},on:{percent:t.percentFee,flat:t.flatFee},model:{value:t.displayValue,callback:function(e){t.displayValue=e},expression:"displayValue"}})],1)],2)],1)};v._withStripped=!0;var h=function(){var t=this,e=t._self._c;return e("aside",{staticClass:"vue-keyboard",class:{full:t.full,empty:t.empty,valid:t.valid,invalid:!t.valid},attrs:{role:"application","data-value":t.value,"data-layout":t.layout}},t._l(t.buttons,(function(a){return e("div",{staticClass:"vue-keyboard-row",attrs:{role:"row","data-keys":a.length}},t._l(a,(function(a){return e("button",{staticClass:"vue-keyboard-key",class:a.type,attrs:{role:"button","data-args":a.args,"data-text":a.value,"data-action":a.action.name},domProps:{innerHTML:t._s(a.value)},on:{click:function(t){return t.preventDefault(),a.action.callable.apply(null,arguments)}}})})),0)})),0)};h._withStripped=!0;const f="7440011c983cf39ae730b1f831e2922ac5a76910",y="f630c4abcae620278f82e142a526ef325c2a773a",g="ad982c66898e02a5dab419ea7568421b03f68ee2";var w=e({name:"keyboard",props:{value:{type:String,default:""},layouts:{type:[String,Array],required:!0},maxlength:{type:Number,default:0,validator:t=>t>=0},pattern:{type:String,default:null}},data:()=>({layout:0}),computed:{full(){return this.maxlength>0&&this.value.length>=this.maxlength},empty(){return 0===this.value.length},lines(){return(Array.isArray(this.layouts)?this.layouts:[this.layouts])[this.layout].replace("||",f).replace("{{",y).replace("}}",g).split("|")},buttons(){return this.lines.map((t=>{let e=t.match(new RegExp(`(${y}|${g}|${f}|.)`,"g")),a=[],s=null;return e.forEach((t=>{if("{"===t)s="";else if("}"===t){let t=s.split(":"),e=t.length>1?t[0]:"",i=t.length>1?t[1]:t[0],r=t.length>2?t[2]:null,o=null;o=["append","backspace","space","clear","goto"].indexOf(i)>=0?this[i].bind(this,r):this.$emit.bind(this,i,this),a.push({type:"action",action:{name:i.replace(/\s+/g,"-").toLowerCase(),callable:o},value:e,args:r}),s=null}else null!==s?s+=t:(t===f&&(t="|"),t===y&&(t="{"),t===g&&(t="}"),a.push({type:"char",action:{name:null,callable:this.append.bind(this,t)},value:t,args:null}))})),a}))},valid(){return!this.pattern||this.value.match(new RegExp(this.pattern))}},methods:{mutate(t){this.maxlength>0&&(t=t.slice(0,this.maxlength)),this.$emit("input",t)},append(t){this.mutate(this.value+t)},backspace(){this.mutate(this.value.slice(0,this.value.length-1))},space(){this.append(" ")},goto(t){if(!Array.isArray(this.layouts))throw new Error("A single non-array layout was provided.");if(!(t>=0&&t<this.layouts.length))throw new Error("The requested layout does not exist.");this.layout=t},clear(){this.mutate("")}}},h,[],!1,null,null,null);const C=e({name:"FeeKeypad",components:{keyboard:w.exports},computed:{hotkeys(){return{discount:{f4:this.showFeeKeypad,esc:this.hideFeeKepad},fee:{f5:this.showFeeKeypad,esc:this.hideFeeKepad}}[this.shortKey]}},props:{name:{type:String,default:"Fee"},className:{type:String,default:""},shortKey:{type:String,default:""}},data:()=>({input:"",displayValue:"",viewFeeKeypad:!1}),watch:{displayValue(t,e){this.inputChange()}},methods:{hideFeeKepad(t){this.viewFeeKeypad=!1},layout(){return'123|456|789|{<span class="keypord-icon flaticon-backspace"></span>:backspace}0'+wepos.currency_format_decimal_sep+"|{% "+this.name+":percent}{"+wepos.currency_format_symbol+" "+this.name+":flat}"},percentFee(){this.$emit("inputfee",this.input,"percent"),this.viewFeeKeypad=!1,this.input="",this.displayValue=""},flatFee(){this.$emit("inputfee",this.input,"flat"),this.viewFeeKeypad=!1,this.input="",this.displayValue=""},inputChange(){this.isValidAmount(this.displayValue)?this.input=this.getFormattedValue(this.displayValue,wepos.currency_format_decimal_sep,"."):this.displayValue=this.getFormattedValue(this.input,".",wepos.currency_format_decimal_sep),jQuery(this.$refs.feeinput).focus()},getFormattedValue(t,e,a){let s=t;return"."!==wepos.currency_format_decimal_sep&&(s=t.replace(e,a)),s},isValidAmount(t){const e=wepos.currency_format_decimal_sep,a=new RegExp("^[0-9]*["+e+"]{0,1}[0-9]*$","gi");return t.match(a)},showFeeKeypad(t){t.preventDefault(),this.viewFeeKeypad=!0,setTimeout((()=>{jQuery(this.$refs.feeinput).focus()}),500)}}},v,[],!1,null,null,null).exports;var b=a(2377),x=a.n(b),k=function(){var t=this,e=t._self._c;return t.settings.wepos_receipts?e("div",{staticClass:"wepos-checkout-print-wrapper"},[e("div",{staticClass:"header"},[t.printdata.billing?e("div",[t.printdata.customer_id?e("p",[t._v("\n          Customer ID: #"+t._s(t.printdata.customer_id)+"\n        ")]):t._e(),t._v(" "),t.printdata.billing.first_name||t.printdata.billing.last_name?e("p",[t._v("\n          "+t._s(t.printdata.billing.first_name+" "+t.printdata.billing.last_name)+"\n        ")]):t._e(),t._v(" "),t.printdata.billing.email?e("p",[t._v("\n          "+t._s(t.printdata.billing.email)+"\n        ")]):t._e(),t._v(" "),t.printdata.billing.phone?e("p",[t._v("\n          "+t._s(t.printdata.billing.phone)+"\n        ")]):t._e(),t._v(" "),t.printdata.billing.nif?e("p",[t._v("\n          "+t._s(t.__("NIF: ","wepos"))+" "+t._s(t.printdata.billing.nif)+"\n        ")]):t._e(),t._v(" "),t.printdata.billing.address_1?e("p",[t._v("\n          "+t._s(t.printdata.billing.address_1)+"\n        ")]):t._e()]):t._e(),t._v(" "),e("div",{domProps:{innerHTML:t._s(t.settings.wepos_receipts.receipt_header)}})]),t._v(" "),e("div",{staticClass:"order-info"},[e("span",{staticClass:"wepos-left"},[e("strong",[t._v(t._s(t.__("Order ID","wepos"))+": #"+t._s(t.printdata.order_id))])]),t._v(" "),e("span",{staticClass:"wepos-right"},[e("strong",[t._v(t._s(t.__("Order Date","wepos"))+": "+t._s(t.formatDate(t.printdata.order_date)))])]),t._v(" "),e("div",{staticClass:"wepos-clearfix"})]),t._v(" "),e("div",{staticClass:"content"},[e("table",{staticClass:"sale-summary"},[e("tbody",[t._l(t.printdata.line_items,(function(a){return e("tr",[e("td",{staticClass:"name"},[t._v("\n                        "+t._s(a.name)+"\n                        "),"incl"===t.settings.woo_tax.wc_tax_display_cart?e("span",{staticClass:"tax-info"},[t._v(t._s(t.__("Tax includes","wepos"))+": "+t._s(t.formatPrice(a.total_tax)))]):t._e(),t._v(" "),a.attribute.length>0?e("div",{staticClass:"attribute"},[e("ul",t._l(a.attribute,(function(a){return e("li",[e("span",{staticClass:"attr_name"},[t._v(t._s(a.name))]),t._v(": "),e("span",{staticClass:"attr_value"},[t._v(t._s(a.option))])])})),0)]):t._e(),t._v(" "),a.expiry&&a.expiry.length>0?e("div",{staticClass:"attribute"},[e("ul",[e("li",{staticStyle:{display:"block"}},[e("span",{staticClass:"attr_name"},[t._v(t._s(t.__("Expiry :","wepos")))])]),t._v(" "),t._l(a.expiry,(function(a){return e("li",{staticStyle:{display:"block"}},[e("span",{staticClass:"attr_value"},[t._v(t._s(a.quantity)+"x "+t._s(a.date))])])}))],2)]):t._e(),t._v(" "),t.hasProductDiscount(a.product_id)?e("div",{staticStyle:{color:"#758598 !important","font-weight":"400 !important"}},[e("small",[t._v("Discount: "+t._s(t.getProductDiscount(a.product_id)+" "+t.wepos.currency_format_symbol)+"\n                        ")])]):t._e()]),t._v(" "),e("td",{staticClass:"quantity"},[t._v(t._s(a.quantity))]),t._v(" "),e("td",{staticClass:"price"},[a.on_sale?[e("span",{staticClass:"regular-price"},[t._v(t._s(t.formatPrice(a.quantity*a.regular_price)))]),t._v(" "),e("span",{staticClass:"sale-price"},[t._v(t._s(t.formatPrice(a.quantity*a.sale_price)))])]:[e("span",{staticClass:"sale-price"},[t._v(t._s(t.formatPrice(a.quantity*a.regular_price)))])]],2)])})),t._v(" "),e("tr",{staticClass:"cart-meta-data"},[e("td",{staticClass:"name",attrs:{colspan:"2"}},[t._v("\n                        "+t._s(t.__("Subtotal","wepos"))+"\n                        "),"incl"==t.settings.woo_tax.wc_tax_display_cart?e("span",{staticClass:"metadata"},[t._v("\n                            "+t._s(t.__("Including Tax","wepos"))+"\n                        ")]):t._e()]),t._v(" "),e("td",{staticClass:"price"},[t._v(t._s(t.formatPrice(t.printdata.subtotal)))])]),t._v(" "),t.hasFixedProductDiscount()?e("tr",{staticClass:"cart-meta-data"},[e("td",{staticClass:"name",attrs:{colspan:"2"}},[t._v(t._s(t.__("Discount","wepos")))]),t._v(" "),e("td",{staticClass:"price"},[t._v("-"+t._s(t.formatPrice(Math.abs(t.totalFixedProductDiscount()))))])]):t._l(t.printdata.coupon_lines,(function(a,s){return e("tr",{staticClass:"cart-meta-data"},[e("td",{staticClass:"name",attrs:{colspan:"2"}},[t._v(t._s(t.__("Discount","wepos"))+" "),e("span",{staticClass:"metadata"},[t._v(t._s("percent"==a.discount_type?a.value+"%":t.formatPrice(a.value)))])]),t._v(" "),e("td",{staticClass:"price"},[t._v("-"+t._s(t.formatPrice(Math.abs(a.total))))])])})),t._v(" "),t._l(t.printdata.fee_lines,(function(a,s){return e("tr",{staticClass:"cart-meta-data"},[e("td",{staticClass:"name",attrs:{colspan:"2"}},[t._v(t._s(t.__("Fee","wepos"))+" "),e("span",{staticClass:"metadata"},[t._v(t._s("percent"==a.fee_type?a.value+"%":t.formatPrice(a.value)))])]),t._v(" "),e("td",{staticClass:"price"},[t._v(t._s(t.formatPrice(Math.abs(a.total))))])])})),t._v(" "),t.printdata.taxtotal?e("tr",[e("td",{staticClass:"name",attrs:{colspan:"2"}},[t._v(t._s("incl"===t.settings.woo_tax.wc_tax_display_cart&&"yes"===t.settings.wepos_general.enable_fee_tax?t.__("Fee Tax","wepos"):t.__("Tax","wepos")))]),t._v(" "),e("td",{staticClass:"price"},[t._v(t._s(t.formatPrice(t.printdata.taxtotal)))])]):t._e(),t._v(" "),e("tr",[e("td",{staticClass:"name",attrs:{colspan:"2"}},[t._v(t._s(t.__("Order Total","wepos")))]),t._v(" "),e("td",{staticClass:"price"},[t._v(t._s(t.formatPrice(t.printdata.ordertotal)))])]),t._v(" "),t._m(0),t._v(" "),e("tr",[e("td",{attrs:{colspan:"2"}},[t._v(t._s(t.__("Payment method","wepos")))]),t._v(" "),e("td",{staticClass:"price"},[t._v(t._s(t.printdata.gateway.title||""))])]),t._v(" "),e("tr",[t._v("\n                  "+t._s()+"\n                  "),e("td",{attrs:{colspan:"2"}},[t._v(t._s(t.__("Payment Type","wepos")))]),t._v(" "),e("td",{staticClass:"price"},[t._v(t._s("partial"===t.printdata.paymenttype?"Partial Payment":"Full Payment"))])]),t._v(" "),(t.printdata.gateway.id="wepos_cash")?[e("tr",[e("td",{attrs:{colspan:"2"}},[t._v(t._s(t.__("Cash Given","wepos")))]),t._v(" "),e("td",{staticClass:"price"},[t._v(t._s(t.formatPrice(t.printdata.cashamount)))])]),t._v("\n                    "+t._s()+"\n                  "),"partial"===t.printdata.paymenttype&&t.printdata.dueamount>0?e("tr",[e("td",{attrs:{colspan:"2"}},[t._v(t._s(t.__("Due Amount","wepos")))]),t._v(" "),e("td",{staticClass:"price"},[t._v(t._s(t.formatPrice(t.printdata.dueamount)))])]):e("tr",[e("td",{attrs:{colspan:"2"}},[t._v(t._s(t.__("Change Money","wepos")))]),t._v(" "),e("td",{staticClass:"price"},[t._v(t._s(t.formatPrice(t.printdata.changeamount)))])])]:t._e()],2)])]),t._v(" "),e("div",{staticClass:"footer",domProps:{innerHTML:t._s(t.settings.wepos_receipts.receipt_footer)}})]):t._e()};k._withStripped=!0;const P=e({name:"ReceiptPrintHtml",props:{printdata:{type:Object,default:()=>({})},settings:{type:Object,default:()=>({})}},methods:{formatDate:t=>(t=new Date(t)).toLocaleString(),hasFixedProductDiscount(){return!!this.printdata.coupon_lines&&this.printdata.coupon_lines.some((t=>"fixed_product"===t.discount_type))},totalFixedProductDiscount(){const t=this.printdata.coupon_lines.filter((t=>"fixed_product"===t.discount_type)).map((t=>parseFloat(t.total))).reduce(((t,e)=>t+e),0).toFixed(2);return t&&t.length>0?t:"0.00"},hasProductDiscount(t){return this.printdata.coupon_lines.some((e=>{var a;return null===(a=e.product_ids)||void 0===a?void 0:a.includes(t)}))},getProductDiscount(t){const e=this.printdata.coupon_lines.filter((e=>void 0!==e.product_ids&&e.product_ids.includes(t))).map((t=>t.total));return e&&e.length>0?parseFloat(e[0]).toFixed(2):"0.00"}}},k,[function(){var t=this._self._c;return t("tr",{staticClass:"divider"},[t("td",{attrs:{colspan:"3"}})])}],!1,null,null,null).exports;var D=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"hotkey",rawName:"v-hotkey",value:t.hotkeys,expression:"hotkeys"}],staticClass:"wepos-custom-note-wrap"},[e("v-popover",{attrs:{offset:"5","popover-base-class":"customer-note tooltip popover",placement:"top",open:t.viewNotePopover}},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openNote.apply(null,arguments)}}},[t._v(t._s(t.__("Add Note","wepos")))]),t._v(" "),e("template",{slot:"popover"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.addCustomerNote.apply(null,arguments)}}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.customerNote,expression:"customerNote"}],ref:"customernote",attrs:{id:"",cols:"30",rows:"5"},domProps:{value:t.customerNote},on:{input:function(e){e.target.composing||(t.customerNote=e.target.value)}}}),t._v(" "),e("button",{staticClass:"add-note-btn",attrs:{type:"submit",disabled:""==t.customerNote}},[t._v(t._s(t.__("Add Note","wepos")))])])])],2)],1)};D._withStripped=!0;const S=e({data:()=>({viewNotePopover:!1,customerNote:""}),computed:{hotkeys(){return{f6:this.openNote,esc:this.closeNote}}},methods:{openNote(t){t.preventDefault(),this.viewNotePopover=!0,setTimeout((()=>{jQuery(this.$refs.customernote).focus()}),500)},closeNote(){this.viewNotePopover=!1},addCustomerNote(){this.$emit("addnote",this.customerNote),this.viewNotePopover=!1,this.customerNote=""}}},D,[],!1,null,null,null).exports;const A=e({name:"Home",components:{ProductSearch:u,CustomerSearch:m,Overlay:o,Modal:wepos_get_lib("Modal"),MugenScroll:x(),FeeKeypad:C,PrintReceipt:_,PrintReceiptHtml:P,CustomerNote:S},data:()=>({showHelp:!1,showQucikMenu:!1,productView:"grid",productLoading:!1,viewVariationPopover:!1,showModal:!1,showPaymentReceipt:!1,products:[],filteredProducts:[],totalPages:1,page:1,showOverlay:!1,selectedVariationProduct:{},attributeDisabled:!0,selectedAttribute:{},availableGateways:[],emptyGatewayDiv:0,cashAmount:"",availableTax:[],settings:{},taxSettings:{},printdata:wepos.hooks.applyFilters("wepos_initial_print_data",{gateway:{id:"",title:""}}),feeData:{},createprintreceipt:!1,selectedCategory:"",selectedGateway:"",categories:[],showReceiptHtml:wepos.hooks.applyFilters("wepos_render_receipt_html",!0),quickLinkList:wepos.hooks.applyFilters("wepos_quick_links",[]),quickLinkListStart:wepos.hooks.applyFilters("wepos_quick_links_start",[]),availableGatewayContent:wepos.hooks.applyFilters("wepos_avaialable_gateway_content",[]),afterMainContents:wepos.hooks.applyFilters("wepos_after_main_content",[]),beforCartPanels:wepos.hooks.applyFilters("wepos_before_cart_panel",[]),couponData:{},paymentType:"full",selectedExpiryKey:null,AvailableExpiryData:null}),computed:{cartdata(){return this.$store.state.Cart.cartdata},orderdata(){return this.$store.state.Order.orderdata},hotkeys(){return{f3:this.toggleProductView,f9:this.initPayment,f10:this.processPayment,f8:this.createNewSale,"shift+f8":this.emptyCart,esc:this.backToSale,"meta+/":this.openHelp,"ctrl+/":this.openHelp}},getFilteredProduct(){return void 0!==this.$route.query.category?this.products.filter((t=>{var e=weLo_.find(t.categories,{id:parseInt(this.$route.query.category)});return null!=e&&Object.keys(e).length>0})):this.products},changeAmount(){let t=this.unFormat(this.cashAmount)-this.$store.getters["Cart/getTotal"];return t=parseFloat(t.toFixed(2)),t>0?t:0},getBreadCrums(){if(void 0!==this.$route.query.category){var t=jQuery.extend(!0,[],this.categories),e=weLo_.find(this.categories,{id:parseInt(this.$route.query.category)}),a=weLo_.findIndex(this.categories,e),s=t.splice(0,a+1),i=[];if(s.length>0){for(var r=s.length-1;r>=0;r--)if(i.length>0){var o=weLo_.find(s,{id:s[r+1].parent_id});if(null!=o&&(i.push(o),null==o.parent_id))break}else i.push(s[r]);return i.slice().reverse()}}return[]},dueAmountPartial(){const t=this.$store.getters["Cart/getTotal"]-this.unFormat(this.cashAmount);return t>0?t:0}},watch:{selectedAttribute(t,e){Object.keys(t).length==this.selectedVariationProduct.attributes.length&&(this.attributeDisabled=!1)},"$route.query.order_key"(){""!=this.$route.query.order_key&&"success"==this.$route.query.payment&&(this.showModal=!1,this.showPaymentReceipt=!0)},"$route.query.category"(){this.selectedCategory={id:-1,level:0,name:this.__("All categories","wepos"),parent_id:null},void 0!==this.$route.query.category&&(this.selectedCategory=weLo_.find(this.categories,{id:parseInt(this.$route.query.category)}))},selectedGateway(t,e){var a=weLo_.find(this.availableGateways,{id:t});this.$store.dispatch("Order/setGatewayAction",a)},cashAmount(t,e){this.ableToProcess()},paymentType(t,e){this.ableToProcess()}},methods:{handleExpireQuantityInput:(t,e,a)=>!t||parseInt(t)<=parseInt(a)?!t||parseInt(t)>=parseInt(e)?t:e:a,openQucikMenu(){this.showQucikMenu=!0},openHelp(t){t.preventDefault(),this.showHelp=!0,this.showQucikMenu=!1},closeHelp(){this.showHelp=!1},addCustomerNote(t){this.$store.dispatch("Order/setCustomerNoteAction",t)},removeCustomerNote(){this.$store.dispatch("Order/removeCustomerNoteAction")},removeBreadcrums(){this.$router.push({name:"Home"})},logout(){wepos.hooks.doAction("wepos_before_logout"),window.location.href=wepos.logout_url.toString()},emptyCart(){this.$store.dispatch("Cart/emptyCartAction"),this.$store.dispatch("Order/emptyOrderdataAction"),this.printdata=wepos.hooks.applyFilters("wepos_initial_print_data",{gateway:{id:"",title:""}}),this.showPaymentReceipt=!1,this.cashAmount="",this.eventBus.$emit("emptycart",this.orderdata),this.showQucikMenu=!1},toggleProductView(t){t.preventDefault(),this.productView="grid"==this.productView?"list":"grid"},createNewSale(){this.$router.push({name:"Home"}),this.emptyCart()},ableToProcess(){let t=this.cartdata.line_items.length>0&&this.isSelectGateway();"wepos_cash"===this.selectedGateway&&(t=(this.unFormat(this.cashAmount)>=this.truncateNumber(this.$store.getters["Cart/getTotal"])||"partial"===this.paymentType)&&t),this.$store.dispatch("Order/setCanProcessPaymentAction",t)},processPayment(t){if(this.$store.getters["Order/getCanProcessPayment"]){var e=this,a=(weLo_.find(this.availableGateways,{id:this.orderdata.payment_method}),wepos.hooks.applyFilters("wepos_order_form_data",{billing:this.orderdata.billing,shipping:this.orderdata.shipping,line_items:this.cartdata.line_items,fee_lines:this.cartdata.fee_lines,coupon_lines:this.cartdata.coupon_lines,customer_id:this.orderdata.customer_id,customer_note:this.orderdata.customer_note,payment_method:this.orderdata.payment_method,payment_method_title:this.orderdata.payment_method_title,meta_data:[{key:"_wepos_is_pos_order",value:!0},{key:"_wepos_cash_tendered_amount",value:this.unFormat(e.cashAmount).toString()},{key:"_wepos_cash_paid_amount",value:this.unFormat(e.cashAmount).toString()},{key:"_wepos_cash_payment_type",value:e.paymentType},{key:"_wepos_product_expiry_data",value:this.cartdata.line_items.map((t=>({product_id:t.product_id,expiry:t.expiry})))}]},this.orderdata,this.cartdata)),s=jQuery(".wepos-checkout-wrapper");s.block({message:null,overlayCSS:{background:"#fff url("+wepos.ajax_loader+") no-repeat center",opacity:.4}}),wepos.api.post(wepos.rest.root+wepos.rest.wcversion+"/orders",a).done((t=>{const e={};t.line_items.forEach((t=>{e[t.product_id]=t.total_tax})),this.cartdata.line_items.forEach((t=>{t.total_tax=e[t.product_id]})),wepos.api.post(wepos.rest.root+wepos.rest.posversion+"/payment/process",t).done((e=>{"success"==e.result?(this.$router.push({name:"Home",query:{order_key:t.order_key,payment:"success"}}),this.printdata=wepos.hooks.applyFilters("wepos_after_payment_print_data",{billing:t.billing,line_items:this.cartdata.line_items,fee_lines:this.cartdata.fee_lines,coupon_lines:this.cartdata.coupon_lines,subtotal:this.$store.getters["Cart/getSubtotal"],taxtotal:this.$store.getters["Cart/getTotalTax"],ordertotal:this.$store.getters["Cart/getTotal"],gateway:{id:t.payment_method,title:t.payment_method_title},order_id:t.number,order_date:t.date_created,customer_id:t.customer_id,cashamount:this.unFormat(this.cashAmount).toString(),changeamount:this.changeAmount.toString(),dueamount:this.dueAmountPartial.toString(),paymenttype:this.paymentType},a),s.unblock()):s.unblock()})).fail((t=>{s.unblock(),alert(t.responseJSON.message)}))})).fail((t=>{s.unblock(),alert(t.responseJSON.message)}))}},initPayment(){this.$store.state.Cart.cartdata.line_items.length<=0||(this.showModal=!0,this.$store.dispatch("Order/setGatewayAction",this.availableGateways[0]),this.selectedGateway=this.availableGateways[0].id)},backToSale(){this.showModal=!1,this.showHelp=!1},isSelectGateway(){return!(null==this.orderdata.payment_method||""==this.orderdata.payment_method)},getProductImage:t=>t.images.length>0?t.images[0].woocommerce_thumbnail:wepos.placeholder_image,getProductImageName:t=>t.images.length>0?t.images[0].name:t.name,setDiscount(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.createCoupon(t,e,this.dispatchCoupon,a)},hasProductDiscount(t){return this.cartdata.coupon_lines.some((e=>{var a;return null===(a=e.product_ids)||void 0===a?void 0:a.includes(t)}))},getExpiryData(t){const e=t.stock_expiry;if(!e)return null;const a=t.expiry;if(!a)return e;const s=e.filter((t=>!a.some((e=>(null==e?void 0:e.date)===(null==t?void 0:t.date)))&&(null==t?void 0:t.quantity)>0));return s.length>0?s:null},getExpiryInfo:(t,e)=>t.stock_expiry.find((t=>t.date===e)),getProductDiscount(t){const e=this.cartdata.coupon_lines.filter((e=>void 0!==e.product_ids&&e.product_ids.includes(t))).map((t=>t.total));return e&&e.length>0?parseFloat(e[0]).toFixed(2):"0.00"},removeProductDiscount(t,e){t.preventDefault();const a=this.cartdata.coupon_lines.findIndex((t=>{var a;return null===(a=t.product_ids)||void 0===a?void 0:a.includes(e)}));this.removeCouponLine(a)},hasFixedProductDiscount(){return this.cartdata.coupon_lines.some((t=>"fixed_product"===t.discount_type))},totalFixedProductDiscount(){const t=this.cartdata.coupon_lines.filter((t=>"fixed_product"===t.discount_type)).map((t=>parseFloat(t.total))).reduce(((t,e)=>t+e),0).toFixed(2);return t&&t.length>0?t:"0.00"},createCoupon(t,e,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=this,r=Date.now(),o=e+r+t;i.couponData={};const n=((t,e)=>{const a=t.filter((t=>t.product_id===e)).map((t=>t.product_id));return a.length>0?a:t.map((t=>t.product_id))})(this.$store.state.Cart.cartdata.line_items,s),c={code:o,amount:t,usage_limit:1,meta_data:[{key:"wepos_cart_discount",value:"yes"}],product_ids:n};"percent"!==e&&"fixed_product"!==e||(c.discount_type=e),wepos.api.post(wepos.rest.root+wepos.rest.posversion+"/coupons",c).done((t=>{i.couponData=t,a(t,e)})).fail((t=>{alert(t.responseJSON.message)}))},dispatchCoupon(t,e){this.$store.dispatch("Cart/addDiscountAction",{title:this.__("Discount","wepos"),value:t,type:e})},saveFee(t){this.$store.dispatch("Cart/saveFeeValueAction",{key:t,feeData:this.feeData}),this.feeData={}},cancelEditFee(t){this.$store.dispatch("Cart/cancelSaveFeeValueAction",t),this.feeData={}},editFeeData(t){this.$store.dispatch("Cart/editFeeValueAction",t),this.feeData=Object.assign({},this.cartdata.fee_lines[t]),this.$nextTick((()=>{jQuery(this.$refs.fee_name).focus()}))},setFee(t,e){this.$store.dispatch("Cart/addFeeAction",{title:this.__("Fee","wepos"),value:t,type:e})},removeCouponLine(t){this.$store.dispatch("Cart/removeCouponLineItemsAction",t)},removeFeeLine(t){this.$store.dispatch("Cart/removeFeeLineItemsAction",t)},getDiscountAmount(t){return"percent"===t.discount_type||"percent"===t.fee_type?this.formatNumber(t.value)+"%":this.formatPrice(t.total)},fetchProducts(){1==this.page&&(this.productLoading=!0),this.totalPages>=this.page?wepos.api.get(wepos.rest.root+wepos.rest.posversion+"/products?status=publish&per_page=30&page="+this.page).done(((t,e,a)=>{this.appendProducts(t),this.page+=1,this.totalPages=parseInt(a.getResponseHeader("X-WP-TotalPages")),this.productLoading=!1})).then(((t,e,a)=>{this.fetchProducts()})):this.productLoading=!1},appendProducts(t){t.forEach((t=>{"variable"===t.type&&this.isAllVariationsDisabled(t)||(this.products=this.products.concat(t))}))},isAllVariationsDisabled(t){let e=!0;return t.attributes.forEach((t=>{!0===t.variation&&(e=!1)})),e},maybeRemoveDeletedProduct:t=>new Promise(((e,a)=>{if(!t)return e(t);if(!t.line_items||t.line_items.length<1)return e(t);let s=t.line_items.map((t=>t.product_id));wepos.api.get(wepos.rest.root+wepos.rest.posversion+"/products?include="+s.toString()).then((a=>{let s=a.map((t=>t.id));return t.line_items.forEach(((e,a)=>{s.includes(e.product_id)||(t.line_items.splice(a,1),localStorage.setItem("cartdata",JSON.stringify(t)))})),e(t)})).fail((()=>a(t)))})),selectCustomer(t){this.$store.dispatch("Order/setCustomerAction",t)},selectVariationProduct(t){this.viewVariationPopover=!0,this.selectedVariationProduct=t},addVariationProduct(){let t=this.findMatchingVariations(this.selectedVariationProduct.variations,this.selectedAttribute)[0];this.hasStock(t)||this.toast({title:this.__("This product is out of stock.","wepos"),type:"error"}),t.parent_id=this.selectedVariationProduct.id,t.type=this.selectedVariationProduct.type,t.name=this.selectedVariationProduct.name,t.type=this.selectedVariationProduct.type,this.selectedAttribute={},this.attributeDisabled=!0,t.stock_expiry=this.selectedVariationProduct.meta_data.some((t=>"_expiry_rule"===t.key&&"yes"===t.value))?this.selectedVariationProduct.meta_data.find((t=>"_expiry_data"===t.key)).value:null,this.$store.dispatch("Cart/addToCartAction",t)},addToCart(t){this.hasStock(t)?(t.stock_expiry=t.meta_data.some((t=>"_expiry_rule"===t.key&&"yes"===t.value))?t.meta_data.find((t=>"_expiry_data"===t.key)).value:null,this.$store.dispatch("Cart/addToCartAction",t)):this.toast({title:this.__("Product is out of stock!","wepos-pro"),type:"error"})},toggleEditQuantity(t,e){this.$store.dispatch("Cart/toggleEditQuantityAction",e)},removeItem(t,e){this.$store.dispatch("Cart/removeCartItemAction",t);const a=this.cartdata.coupon_lines.findIndex((t=>t.product_ids.includes(e)));this.hasProductDiscount(e)&&-1!==a&&this.removeCouponLine(a)},addQuantity(t){this.$store.dispatch("Cart/addItemQuantityAction",t)},removeQuantity(t){this.$store.dispatch("Cart/removeItemQuantityAction",t)},updateExpiryQuantity(t,e,a){this.$store.dispatch("Cart/updateCartExpiryItemQuantityAction",{key:t,expiryDate:e,quantity:a}),this.selectedExpiryKey=null},fetchGateway(){wepos.api.get(wepos.rest.root+wepos.rest.posversion+"/payment/gateways").done((t=>{this.availableGateways=t,this.emptyGatewayDiv=4-this.availableGateways.length%4}))},truncateTitle:(t,e)=>weLo_.truncate(t,{length:e}),unSanitizeString:t=>t.split("-").map((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})).join(" "),fetchSettings(){wepos.api.get(wepos.rest.root+wepos.rest.posversion+"/settings").done((t=>{this.settings=t,this.$store.dispatch("Cart/setSettingsAction",t)}))},fetchTaxes(){wepos.api.get(wepos.rest.root+wepos.rest.posversion+"/taxes").done((t=>{this.availableTax=t,this.$store.dispatch("Cart/setAvailableTaxAction",t)}))},handleCategorySelect(t,e){"-1"==t.id?this.$router.push({name:"Home"}):this.$router.push({name:"Home",query:{category:t.id}})},handleCategoryRemove(t,e){this.$router.push({name:"Home"}),this.selectedCategory={id:-1,level:0,name:this.__("All categories","wepos"),parent_id:null}},fetchCategories(){wepos.api.get(wepos.rest.root+wepos.rest.wcversion+"/products/categories?hide_empty=true&_fields=id,name,parent_id&per_page=100").then((t=>{t.sort((function(t,e){return t.name.localeCompare(e.name)}));var e=function(t,e){var a=[],s={};return t.forEach((function(t){s[t.id]={response:t,children:s[t.id]&&s[t.id].children},null===t.parent_id?a.push(s[t.id]):(s[t.parent_id]=s[t.parent_id]||{},s[t.parent_id].children=s[t.parent_id].children||[],s[t.parent_id].children.push(s[t.id]))})),a}(t),a={id:-1,level:0,name:this.__("All categories","wepos"),parent_id:null},s=e.reduce(function t(e){return function(a,s){return s.response.level=e,a.concat(s.response,(s.children||[]).reduce(t(e+1),[]))}}(0),[]);this.categories=s,this.categories.unshift(a),this.selectedCategory=a,void 0!==this.$route.query.category&&(this.selectedCategory=weLo_.find(t,{id:parseInt(this.$route.query.category)}))}))},filterProducts(){this.products=this.products.filter((t=>weLo_.findIndex(t.categories,{id:this.$route.query.category})>0))},fetchTaxSettings(){wepos.api.get(wepos.rest.root+wepos.rest.wcversion+"/settings/tax").done((t=>{this.taxSettings=t}))},focusCashInput(){document.querySelector("#input-cash-amount").focus()}},async created(){if(this.fetchSettings(),this.fetchTaxes(),this.fetchProducts(),this.fetchGateway(),this.fetchCategories(),"undefined"!=typeof localStorage)try{var t=JSON.parse(localStorage.getItem("cartdata")),e=JSON.parse(localStorage.getItem("orderdata"));t=await this.maybeRemoveDeletedProduct(t),this.$store.dispatch("Cart/setCartDataAction",t),this.$store.dispatch("Order/setOrderDataAction",e)}catch(t){e=JSON.parse(localStorage.getItem("orderdata"));this.$store.dispatch("Cart/setCartDataAction",t),this.$store.dispatch("Order/setOrderDataAction",e)}window.addEventListener("beforeunload",(()=>{"undefined"!=typeof localStorage&&(localStorage.setItem("cartdata",JSON.stringify(this.$store.state.Cart.cartdata)),localStorage.setItem("orderdata",JSON.stringify(this.$store.state.Order.orderdata)))}),!1)}},i,[function(){var t=this._self._c;return t("td",{staticClass:"icon"},[t("span",{staticClass:"flaticon-right-arrow"})])}],!1,null,null,null).exports;let F=wepos_get_lib("Vue"),$=wepos_get_lib("Router");F.use($);const N=new $({routes:wepos.hooks.applyFilters("wepos_frontend_routes",[{path:"/",name:"Home",component:A}])}),I={hasStock(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.manage_stock?!!t.backorders_allowed||t.stock_quantity>e:"outofstock"!=t.stock_status},hasExpiryStock(t,e,a){var s;const i=null===(s=t.stock_expiry)||void 0===s?void 0:s.find((t=>t.date===e));return parseInt(null==i?void 0:i.quantity)>=a}},T={namespaced:!0,state:{settings:{},availableTax:{},cartdata:{line_items:[],fee_lines:[],coupon_lines:[]}},getters:{getSubtotal(t){var e=0;return weLo_.forEach(t.cartdata.line_items,(function(t,a){t.on_sale?e+=t.quantity*t.sale_price:e+=t.quantity*t.regular_price})),e},getTotalFee(t){var e=0;return weLo_.forEach(t.cartdata.fee_lines,(function(t,a){e+=Math.abs(t.total)})),e},getTotalDiscount(t){var e=0;return weLo_.forEach(t.cartdata.coupon_lines,(function(t,a){e+=Number(Math.abs(t.total))})),e},getTotalLineTax(t){var e=0;return weLo_.forEach(t.cartdata.line_items,(function(t,a){e+=Math.abs(t.tax_amount*t.quantity)})),e},getTotalTax(t,e){let a=0,s=0,i=0,r=0;return weLo_.forEach(t.cartdata.line_items,(function(t,e){a+=Math.abs(t.tax_amount*t.quantity)})),null!=t.settings.woo_tax&&"incl"==t.settings.woo_tax.wc_tax_display_cart&&(a=0),weLo_.forEach(t.cartdata.fee_lines,(function(e,a){if("taxable"!==e.tax_status)return;let i=""===e.tax_class?"standard":e.tax_class,r=weLo_.find(t.availableTax,{class:i.toString()});r&&(s+=Math.abs(e.total)*Math.abs(r.rate)/100)})),weLo_.forEach(t.cartdata.coupon_lines,(function(s,o){if("taxable"!==s.tax_status)return;let n=""===s.tax_class?"standard":s.tax_class;weLo_.find(t.availableTax,{class:n.toString()})&&(i=s.total/e.getSubtotal*100,r+=i/100*a)})),a+=r,a+s},getOrderTotal:(t,e)=>e.getSubtotal+e.getTotalFee+e.getTotalTax,getTotal:(t,e)=>e.getOrderTotal-e.getTotalDiscount,getSettings:(t,e)=>t.settings},mutations:{setSettings(t,e){t.settings=e},setAvailableTax(t,e){t.availableTax=e},setCartData(t,e){weLo_.isEmpty(e)?t.cartdata={line_items:[],fee_lines:[],coupon_lines:[]}:t.cartdata=Object.assign({},e)},addToCartItem(t,e){var a={};a.product_id=0===e.parent_id?e.id:e.parent_id,a.name=e.name,a.quantity=1,a.regular_price=e.regular_display_price,a.sale_price=e.sales_display_price,a.on_sale=e.on_sale,a.attribute=e.attributes,a.variation_id=0!==e.parent_id?e.id:0,a.editQuantity=!1,a.type=e.type,a.tax_amount=e.tax_amount,a.manage_stock=e.manage_stock,a.stock_status=e.stock_status,a.backorders_allowed=e.backorders_allowed,a.stock_quantity=e.stock_quantity,a.stock_expiry=e.stock_expiry,a.expiry=null;var s=weLo_.findIndex(t.cartdata.line_items,{product_id:a.product_id,variation_id:a.variation_id});s<0?I.hasStock(e)&&t.cartdata.line_items.push(a):I.hasStock(e,t.cartdata.line_items[s].quantity)&&(t.cartdata.line_items[s].quantity+=1)},removeCartItem(t,e){t.cartdata.line_items.splice(e,1)},addCartItemQuantity(t,e){var a=t.cartdata.line_items[e];I.hasStock(a,a.quantity)&&t.cartdata.line_items[e].quantity++},removeCartItemQuantity(t,e){t.cartdata.line_items[e].quantity<=1?t.cartdata.line_items[e].quantity=1:t.cartdata.line_items[e].quantity--},updateCartExpiryItemQuantity(t,e){let{key:a,expiryDate:s,quantity:i}=e,r=t.cartdata.line_items[a];if(!r||!s||null===i)return;i=parseInt(i),r.expiry||(r.expiry=[]);let o=r.expiry.find((t=>t.date===s)),n=parseInt(r.quantity),c=o?parseInt(o.quantity):0;if(o&&i<=0)return r.quantity=n>c?n-c:0,void(r.expiry=r.expiry.filter((t=>t.date!==s)));if(!I.hasExpiryStock(r,s,i))return;let l=i;o?(l=i-c,o.quantity=i):r.expiry.push({date:s,quantity:i}),r.quantity=n+l},toggleEditQuantity(t,e){t.cartdata.line_items[e].editQuantity=!t.cartdata.line_items[e].editQuantity},addDiscount(t,e){t.cartdata.coupon_lines.push({name:e.title,type:"discount",isEdit:!1,value:e.value.amount,discount_type:e.value.discount_type,tax_status:"incl"!==t.settings.woo_tax.wc_tax_display_shop?"taxable":"none",tax_class:"",total:0,code:e.value.code,product_ids:e.value.product_ids})},addFee(t,e){t.cartdata.fee_lines.push({name:e.title,type:"fee",value:e.value.toString(),isEdit:!1,fee_type:e.type,tax_status:"yes"===t.settings.wepos_general.enable_fee_tax?"taxable":"none",tax_class:"",total:0})},saveFeeValue(t,e){t.cartdata.fee_lines.splice(e.key,1,e.feeData),t.cartdata.fee_lines[e.key].isEdit=!1},editFeeValue(t,e){t.cartdata.fee_lines[e].isEdit=!0},cancelSaveFeeValue(t,e){t.cartdata.fee_lines[e].isEdit=!1},removeCouponLineItems(t,e){t.cartdata.coupon_lines.splice(e,1)},removeFeeLineItems(t,e){t.cartdata.fee_lines.splice(e,1)},emptyCart(t){t.cartdata={line_items:[],fee_lines:[],coupon_lines:[]}},calculateDiscount(t,e){t.cartdata.coupon_lines.length>0&&t.cartdata.coupon_lines.forEach(((a,s)=>{if("discount"===a.type){let i=Math.abs(a.value);if("percent"===a.discount_type)t.cartdata.coupon_lines[s].total="-"+e.getSubtotal*i/100;else if("fixed_product"===a.discount_type){const e=t.cartdata.line_items.filter((t=>{var e;return null===(e=a.product_ids)||void 0===e?void 0:e.includes(t.product_id)})).reduce(((t,e)=>t+e.quantity),0);t.cartdata.coupon_lines[s].total="-"+i*e}else t.cartdata.coupon_lines[s].total=`-${i}`}}))},calculateFee(t,e){t.cartdata.fee_lines.length>0&&weLo_.forEach(t.cartdata.fee_lines,((a,s)=>{"fee"==a.type&&("percent"==a.fee_type?t.cartdata.fee_lines[s].total=(e.getSubtotal*Math.abs(a.value)/100).toString():t.cartdata.fee_lines[s].total=Math.abs(a.value).toString())}))}},actions:{setSettingsAction(t,e){t.commit("setSettings",e)},setAvailableTaxAction(t,e){t.commit("setAvailableTax",e)},setCartDataAction(t,e){t.commit("setCartData",e),t.commit("calculateDiscount",t.getters),t.commit("calculateFee",t.getters)},addToCartAction(t,e){t.commit("addToCartItem",e),t.commit("calculateDiscount",t.getters),t.commit("calculateFee",t.getters)},removeCartItemAction(t,e){t.commit("removeCartItem",e),t.commit("calculateDiscount",t.getters),t.commit("calculateFee",t.getters)},addItemQuantityAction(t,e){t.commit("addCartItemQuantity",e),t.commit("calculateDiscount",t.getters),t.commit("calculateFee",t.getters)},removeItemQuantityAction(t,e){t.commit("removeCartItemQuantity",e),t.commit("calculateDiscount",t.getters),t.commit("calculateFee",t.getters)},updateCartExpiryItemQuantityAction(t,e){t.commit("updateCartExpiryItemQuantity",e)},toggleEditQuantityAction(t,e){t.commit("toggleEditQuantity",e)},addDiscountAction(t,e){t.commit("addDiscount",e),t.commit("calculateDiscount",t.getters)},addFeeAction(t,e){t.commit("addFee",e),t.commit("calculateFee",t.getters)},removeCouponLineItemsAction(t,e){t.commit("removeCouponLineItems",e),t.commit("calculateDiscount",t.getters)},removeFeeLineItemsAction(t,e){t.commit("removeFeeLineItems",e),t.commit("calculateFee",t.getters)},saveFeeValueAction(t,e){t.commit("saveFeeValue",e),t.commit("calculateDiscount",t.getters),t.commit("calculateFee",t.getters)},editFeeValueAction(t,e){t.commit("editFeeValue",e)},cancelSaveFeeValueAction(t,e){t.commit("cancelSaveFeeValue",e)},emptyCartAction(t){t.commit("emptyCart")},calculateDiscount(t){t.commit("calculateDiscount",t.getters)},calculateFee(t){t.commit("calculateFee",t.getters)}}},O={namespaced:!0,state:{orderdata:{billing:{},shipping:{},customer_id:0,customer_note:"",payment_method:"",payment_method_title:""},canProcessPayment:!1},getters:{getCanProcessPayment:t=>t.canProcessPayment},mutations:{setOrderData(t,e){weLo_.isEmpty(e)?t.orderdata={billing:{},shipping:{},customer_id:0,customer_note:"",payment_method:"",payment_method_title:""}:t.orderdata=e},setCustomer(t,e){Object.keys(e).length>0?(t.orderdata.billing=e.billing,t.orderdata.shipping=e.shipping,t.orderdata.customer_id=e.id):(t.orderdata.billing={},t.orderdata.shipping={},t.orderdata.customer_id=0)},emptyOrderdata(t){t.orderdata={billing:{},shipping:{},customer_id:0,customer_note:"",payment_method:"",payment_method_title:""}},setCustomerNote(t,e){t.orderdata.customer_note=e.trim()},removeCustomerNote(t){t.orderdata.customer_note=""},setGateway(t,e){t.orderdata.payment_method=e.id,t.orderdata.payment_method_title=e.title},setCanProcessPayment(t,e){t.canProcessPayment=e}},actions:{setOrderDataAction(t,e){t.commit("setOrderData",e)},setCustomerAction(t,e){t.commit("setCustomer",e)},emptyOrderdataAction(t){t.commit("emptyOrderdata")},setCustomerNoteAction(t,e){t.commit("setCustomerNote",e)},removeCustomerNoteAction(t){t.commit("removeCustomerNote")},setGatewayAction(t,e){t.commit("setGateway",e)},setCanProcessPaymentAction(t,e){t.commit("setCanProcessPayment",e)}}};let E=wepos_get_lib("Vue"),q=wepos_get_lib("Vuex");E.use(q);const V=new q.Store({modules:{Cart:T,Order:O}});let L=wepos_get_lib("Vue");L.config.productionTip=!1,new L({el:"#vue-frontend-app",router:N,store:V,render:t=>t(s),created(){this.setLocaleData(wepos.i18n.wepos),wepos.i18n["wepos-pro"]&&this.setLocaleData(wepos.i18n["wepos-pro"])}})})()})();