jQuery(document).ready((function(a){const e=a("#update_partial_payment_button");a("#partial_payment_method").on("change",(function(){"Cash & Card"===a(this).val()?(a("#partial_single_amount").hide(),a("#partial_cash_card_amount").show()):(a("#partial_single_amount").show(),a("#partial_cash_card_amount").hide())})),e.on("click",(function(){const t=restApiSettings.restUrl,s=restApiSettings.nonce;let r=a("#partial_payment_amount").val();const o=a("#partial_payment_method").val();let n={cash:"",card:""};"Cash & Card"===o&&(r=parseFloat(a("#partial_cash_payment_amount").val())+parseFloat(a("#partial_card_payment_amount").val()),n={cash:a("#partial_cash_payment_amount").val(),card:a("#partial_card_payment_amount").val()});const i=a("#partial_payment_id").val();e.prop("disabled",!0).text("Please wait..."),localStorage.removeItem("partialPaymentMessage"),a.ajax({type:"POST",url:t,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",s)},data:{order_id:i,partial_amount:r,partial_method:o,cash_card_amount:n},success:function(a){"success"===a.result?localStorage.setItem("partialPaymentMessage",JSON.stringify({type:"success",message:"Partial payment updated successfully!"})):localStorage.setItem("partialPaymentMessage",JSON.stringify({type:"error",message:"Error: "+a.message})),location.reload()},error:function(a){localStorage.setItem("partialPaymentMessage",JSON.stringify({type:"error",message:"Error: Failed to update partial payment."})),location.reload()}})}));const t=JSON.parse(localStorage.getItem("partialPaymentMessage"));if(t&&t.message){const e="success"===t.type?"woocommerce-message notice notice-success":"woocommerce-error notice notice-error";a(".woocommerce-notices-wrapper").html('<div class="'+e+'">'+t.message+"</div>"),a(".wrap").prepend('<div class="'+e+' is-dismissible"><p>'+t.message+"</p></div>"),localStorage.removeItem("partialPaymentMessage")}}));